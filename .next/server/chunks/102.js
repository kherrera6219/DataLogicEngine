exports.id=102,exports.ids=[102],exports.modules={1398:(e,i,a)=>{"use strict";a.d(i,{Z:()=>c});var s=a(997);a(6689);var n=a(7143);a(1664);var l=a(1163),t=a(8954);let r=(0,n.makeStyles)({container:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{flex:"1 0 auto",...n.shorthands.padding("24px","0"),width:"100%",maxWidth:"100%",overflowX:"hidden"},mainContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...n.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...n.shorthands.padding("0","24px")}},footer:{backgroundColor:"var(--colorNeutralBackground2)",color:"var(--colorNeutralForeground2)",...n.shorthands.padding("16px","0"),marginTop:"32px"},footerContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...n.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...n.shorthands.padding("0","24px")}},footerRow:{display:"flex",flexDirection:"column","@media(min-width: 768px)":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},footerCopyright:{textAlign:"center",marginBottom:"16px","@media(min-width: 768px)":{textAlign:"left",marginBottom:"0"}},socialLinks:{display:"flex",justifyContent:"center",gap:"24px","@media(min-width: 768px)":{justifyContent:"flex-end"}},socialLink:{color:"var(--colorNeutralForeground2)",fontSize:"20px",transition:"color 0.2s",":hover":{color:"var(--colorBrandForeground1)"}}});function c({children:e,className:i}){let a=r();return(0,l.useRouter)(),(0,s.jsxs)("div",{className:a.container,children:[s.jsx(t.Z,{navItems:[{label:"Home",href:"/",icon:"house-door"},{label:"Chat",href:"/chat",icon:"chat-dots"},{label:"About",href:"#about",icon:"info-circle"}]}),s.jsx("main",{className:(0,n.mergeClasses)(a.main,i),children:s.jsx("div",{className:a.mainContent,children:e})}),s.jsx("footer",{className:a.footer,children:s.jsx("div",{className:a.footerContent,children:(0,s.jsxs)("div",{className:a.footerRow,children:[s.jsx("div",{className:a.footerCopyright,children:(0,s.jsxs)(n.Text,{size:200,children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})}),(0,s.jsxs)("div",{className:a.socialLinks,children:[s.jsx("a",{href:"#",className:a.socialLink,"aria-label":"GitHub",children:s.jsx("i",{className:"bi bi-github"})}),s.jsx("a",{href:"#",className:a.socialLink,"aria-label":"Twitter",children:s.jsx("i",{className:"bi bi-twitter"})}),s.jsx("a",{href:"#",className:a.socialLink,"aria-label":"LinkedIn",children:s.jsx("i",{className:"bi bi-linkedin"})})]})]})})})]})}},7769:(e,i,a)=>{"use strict";a.d(i,{Z:()=>o});var s=a(997),n=a(6689),l=a(6529),t=a(5401),r=a(7650),c=a(2448);let o=({initialLocations:e})=>{let[i,a]=(0,n.useState)(e||[]),[o,d]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(null),[u,j]=(0,n.useState)({name:"",type:"",lat:"",lng:"",radius:"50"}),[g,b]=(0,n.useState)("list"),[y,f]=(0,n.useState)([]),N=(0,n.useRef)(null),v=(0,n.useRef)(null),w=(0,n.useRef)([]);(0,n.useEffect)(()=>{C()},[]),(0,n.useEffect)(()=>{i.length>0&&"map"===g&&window.google&&window.google.maps&&L()},[i,g]),(0,n.useEffect)(()=>{if("map"===g&&!window.google){let e=document.createElement("script");return e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places",e.async=!0,e.defer=!0,e.onload=()=>{i.length>0&&L()},document.head.appendChild(e),()=>{document.head.removeChild(e)}}},[g]);let C=async(e={})=>{d(!0),m(null);try{let i=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{a&&i.append(e,a)});let s=await fetch(`/api/locations?${i.toString()}`),n=await s.json();n.success?a(n.locations||[]):m(n.error||"Failed to fetch locations")}catch(e){m("Error fetching locations: "+e.message)}finally{d(!1)}},k=async(e=null)=>{d(!0),m(null);try{let i=new URLSearchParams;e&&i.append("root_uid",e);let a=await fetch(`/api/locations/hierarchy?${i.toString()}`),s=await a.json();s.success?(f(s.hierarchies||[s.hierarchy]),b("hierarchy")):m(s.error||"Failed to fetch location hierarchy")}catch(e){m("Error fetching hierarchy: "+e.message)}finally{d(!1)}},Z=e=>{let{name:i,value:a}=e.target;j(e=>({...e,[i]:a}))},L=()=>{if(!N.current)return;let e={lat:0,lng:0},a=new window.google.maps.LatLngBounds,s=!1;i.forEach(e=>{e.latitude&&e.longitude&&(a.extend({lat:e.latitude,lng:e.longitude}),s=!0)}),s||(e={lat:39.8283,lng:-98.5795}),v.current=new window.google.maps.Map(N.current,{center:e,zoom:4,mapTypeId:"roadmap"}),w.current=i.filter(e=>e.latitude&&e.longitude).map(e=>{let i=new window.google.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:v.current,title:e.name,animation:window.google.maps.Animation.DROP});return i.addListener("click",()=>{p(e)}),i}),s&&v.current.fitBounds(a)},S=(e,i=0)=>(0,s.jsxs)("div",{className:"location-hierarchy-node mb-2",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",style:{paddingLeft:`${20*i}px`},children:[s.jsx("i",{className:`bi bi-geo-alt me-2 ${0===i?"text-primary":""}`}),(0,s.jsxs)("span",{className:`location-name ${0===i?"fw-bold":""}`,onClick:()=>p(e),style:{cursor:"pointer"},children:[e.name,(0,s.jsxs)("span",{className:"text-muted ms-2 small",children:["(",e.location_type,")"]})]})]}),e.children&&e.children.length>0&&s.jsx("div",{className:"children-container",children:e.children.map(e=>S(e,i+1))})]},e.uid);return(0,s.jsxs)("div",{className:"location-manager",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[s.jsx("h2",{children:"Location Management (Axis 12)"}),(0,s.jsxs)("div",{className:"btn-group",children:[(0,s.jsxs)(l.Z,{variant:"list"===g?"primary":"outline-primary",onClick:()=>b("list"),children:[s.jsx("i",{className:"bi bi-list me-1"})," List View"]}),(0,s.jsxs)(l.Z,{variant:"map"===g?"primary":"outline-primary",onClick:()=>b("map"),children:[s.jsx("i",{className:"bi bi-map me-1"})," Map View"]}),(0,s.jsxs)(l.Z,{variant:"hierarchy"===g?"primary":"outline-primary",onClick:()=>k(),children:[s.jsx("i",{className:"bi bi-diagram-3 me-1"})," Hierarchy"]})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsxs)(t.Z,{className:"mb-4",children:[s.jsx(t.Z.Header,{children:"Location Search"}),s.jsx(t.Z.Body,{children:(0,s.jsxs)(r.Z,{onSubmit:e=>{e.preventDefault(),C(u)},children:[(0,s.jsxs)(r.Z.Group,{className:"mb-3",children:[s.jsx(r.Z.Label,{children:"Name"}),s.jsx(r.Z.Control,{type:"text",name:"name",placeholder:"Search by name",value:u.name,onChange:Z})]}),(0,s.jsxs)(r.Z.Group,{className:"mb-3",children:[s.jsx(r.Z.Label,{children:"Type"}),(0,s.jsxs)(r.Z.Select,{name:"type",value:u.type,onChange:Z,children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"Country",children:"Country"}),s.jsx("option",{value:"State",children:"State/Province"}),s.jsx("option",{value:"City",children:"City"}),s.jsx("option",{value:"County",children:"County"}),s.jsx("option",{value:"Region",children:"Region"}),s.jsx("option",{value:"SupranationalRegion",children:"Supranational Region"})]})]}),(0,s.jsxs)("div",{className:"row",children:[s.jsx("div",{className:"col-6",children:(0,s.jsxs)(r.Z.Group,{className:"mb-3",children:[s.jsx(r.Z.Label,{children:"Latitude"}),s.jsx(r.Z.Control,{type:"number",name:"lat",placeholder:"e.g. 40.7128",value:u.lat,onChange:Z,step:"any"})]})}),s.jsx("div",{className:"col-6",children:(0,s.jsxs)(r.Z.Group,{className:"mb-3",children:[s.jsx(r.Z.Label,{children:"Longitude"}),s.jsx(r.Z.Control,{type:"number",name:"lng",placeholder:"e.g. -74.0060",value:u.lng,onChange:Z,step:"any"})]})})]}),(0,s.jsxs)(r.Z.Group,{className:"mb-3",children:[s.jsx(r.Z.Label,{children:"Radius (km)"}),s.jsx(r.Z.Control,{type:"number",name:"radius",placeholder:"Search radius in km",value:u.radius,onChange:Z,min:"1",max:"5000"})]}),s.jsx("div",{className:"d-grid",children:(0,s.jsxs)(l.Z,{variant:"primary",type:"submit",disabled:o,children:[o?s.jsx(c.Z,{size:"sm",animation:"border"}):s.jsx("i",{className:"bi bi-search me-1"}),"Search Locations"]})})]})})]}),x&&(0,s.jsxs)(t.Z,{className:"location-details",children:[(0,s.jsxs)(t.Z.Header,{className:"d-flex justify-content-between align-items-center",children:[s.jsx("span",{children:"Location Details"}),s.jsx(l.Z,{variant:"link",className:"p-0 text-muted",onClick:()=>p(null),children:s.jsx("i",{className:"bi bi-x-lg"})})]}),(0,s.jsxs)(t.Z.Body,{children:[s.jsx("h4",{children:x.name}),s.jsx("p",{className:"text-muted",children:x.location_type}),x.latitude&&x.longitude&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Coordinates:"})," ",x.latitude,", ",x.longitude]}),x.attributes&&Object.keys(x.attributes).length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[s.jsx("h5",{children:"Attributes"}),s.jsx("ul",{className:"list-unstyled",children:Object.entries(x.attributes).map(([e,i])=>(0,s.jsxs)("li",{className:"mb-1",children:[(0,s.jsxs)("strong",{children:[e,":"]})," ","object"==typeof i?JSON.stringify(i):i]},e))})]}),x.parent&&(0,s.jsxs)("div",{className:"mt-3",children:[s.jsx("h5",{children:"Parent Location"}),(0,s.jsxs)("p",{className:"mb-0 cursor-pointer",onClick:()=>p(x.parent),style:{cursor:"pointer"},children:[s.jsx("i",{className:"bi bi-arrow-up-right me-1"}),x.parent.name," (",x.parent.location_type,")"]})]}),x.children&&x.children.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("h5",{children:["Sub-Locations (",x.children.length,")"]}),(0,s.jsxs)("ul",{className:"list-unstyled",children:[x.children.slice(0,5).map(e=>s.jsx("li",{className:"mb-1",children:(0,s.jsxs)("span",{className:"cursor-pointer",onClick:()=>p(e),style:{cursor:"pointer"},children:[s.jsx("i",{className:"bi bi-geo-alt-fill me-1 small"}),e.name," (",e.location_type,")"]})},e.uid)),x.children.length>5&&(0,s.jsxs)("li",{className:"text-muted small",children:["+ ",x.children.length-5," more locations"]})]})]}),s.jsx("div",{className:"mt-3 d-grid gap-2",children:(0,s.jsxs)(l.Z,{variant:"outline-primary",size:"sm",onClick:()=>k(x.uid),children:[s.jsx("i",{className:"bi bi-diagram-3 me-1"}),"View in Hierarchy"]})})]})]})]}),(0,s.jsxs)("div",{className:"col-md-8",children:[h&&(0,s.jsxs)("div",{className:"alert alert-danger",children:[s.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),h]}),o?(0,s.jsxs)("div",{className:"text-center my-5",children:[s.jsx(c.Z,{animation:"border"}),s.jsx("p",{className:"mt-2",children:"Loading location data..."})]}):(0,s.jsxs)(s.Fragment,{children:["list"===g&&s.jsx("div",{className:"location-list",children:(0,s.jsxs)(t.Z,{children:[s.jsx(t.Z.Header,{children:(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("span",{children:["Locations (",i.length,")"]}),s.jsx("div",{children:(0,s.jsxs)(r.Z.Select,{size:"sm",className:"d-inline-block",style:{width:"auto"},onChange:e=>{j(i=>({...i,type:e.target.value})),C({...u,type:e.target.value})},value:u.type,children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"Country",children:"Countries"}),s.jsx("option",{value:"State",children:"States/Provinces"}),s.jsx("option",{value:"City",children:"Cities"}),s.jsx("option",{value:"County",children:"Counties"}),s.jsx("option",{value:"Region",children:"Regions"})]})})]})}),s.jsx("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover mb-0",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Coordinates"}),u.lat&&u.lng&&s.jsx("th",{children:"Distance"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:0===i.length?s.jsx("tr",{children:(0,s.jsxs)("td",{colSpan:"5",className:"text-center py-3",children:[s.jsx("i",{className:"bi bi-inbox me-2"}),"No locations found"]})}):i.map(e=>(0,s.jsxs)("tr",{onClick:()=>p(e),style:{cursor:"pointer"},className:x?.uid===e.uid?"table-primary":"",children:[s.jsx("td",{children:e.name}),s.jsx("td",{children:s.jsx("span",{className:"badge bg-secondary",children:e.location_type})}),s.jsx("td",{children:e.latitude&&e.longitude?(0,s.jsxs)("small",{children:[e.latitude.toFixed(4),", ",e.longitude.toFixed(4)]}):s.jsx("span",{className:"text-muted",children:"N/A"})}),u.lat&&u.lng&&s.jsx("td",{children:void 0!==e.distance?(0,s.jsxs)("span",{children:[e.distance.toFixed(1)," km"]}):s.jsx("span",{className:"text-muted",children:"N/A"})}),s.jsx("td",{children:s.jsx(l.Z,{size:"sm",variant:"link",onClick:i=>{i.stopPropagation(),p(e)},children:s.jsx("i",{className:"bi bi-info-circle"})})})]},e.uid))})]})})]})}),"map"===g&&(0,s.jsxs)(t.Z,{children:[s.jsx(t.Z.Header,{children:"Location Map"}),s.jsx(t.Z.Body,{className:"p-0",children:s.jsx("div",{ref:N,style:{height:"600px",width:"100%"},className:"location-map",children:!window.google&&(0,s.jsxs)("div",{className:"text-center p-5",children:[s.jsx("p",{children:"Loading map..."}),s.jsx(c.Z,{animation:"border"})]})})})]}),"hierarchy"===g&&(0,s.jsxs)(t.Z,{children:[s.jsx(t.Z.Header,{children:"Location Hierarchy"}),s.jsx(t.Z.Body,{children:0===y.length?s.jsx("div",{className:"text-center py-3",children:s.jsx("p",{children:"No hierarchy data available"})}):s.jsx("div",{className:"location-hierarchy",children:y.map(e=>S(e))})})]})]})]})]})]})}},8954:(e,i,a)=>{"use strict";a.d(i,{Z:()=>h});var s=a(997),n=a(6689),l=a(7143),t=a(1664),r=a.n(t),c=a(1163);let o=(0,l.makeStyles)({navbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"var(--colorNeutralBackground1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...l.shorthands.padding("8px","16px"),height:"60px",width:"100%",position:"sticky",top:0,zIndex:100},brand:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",color:"var(--colorBrandForeground1)",fontWeight:600},logo:{display:"flex",fontSize:"24px"},title:{fontSize:"18px","@media(max-width: 576px)":{display:"none"}},titleShort:{display:"none",fontSize:"18px","@media(max-width: 576px)":{display:"block"}},navItems:{display:"flex",alignItems:"center",gap:"8px","@media(max-width: 768px)":{display:"none"}},mobileMenu:{display:"none","@media(max-width: 768px)":{display:"block"}},navLink:{color:"var(--colorNeutralForeground1)",textDecoration:"none",...l.shorthands.padding("8px","12px"),borderRadius:"4px",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--colorNeutralBackground2)"}},activeNavLink:{backgroundColor:"var(--colorNeutralBackground2)",fontWeight:600}}),d=({navItems:e=[]})=>{let i=o(),a=(0,c.useRouter)(),[t,d]=(0,n.useState)(!1),h=e=>a.pathname===e;return(0,s.jsxs)("nav",{className:i.navbar,children:[(0,s.jsxs)(r(),{href:"/",className:i.brand,children:[s.jsx("span",{className:i.logo,children:s.jsx("i",{className:"bi bi-diagram-3"})}),s.jsx("span",{className:i.title,children:"Universal Knowledge Graph"}),s.jsx("span",{className:i.titleShort,children:"UKG"})]}),s.jsx("div",{className:i.navItems,children:e.map((e,a)=>s.jsx(l.Tooltip,{content:e.label,children:(0,s.jsxs)(r(),{href:e.href,className:`${i.navLink} ${h(e.href)?i.activeNavLink:""}`,children:[e.icon&&s.jsx("i",{className:`bi bi-${e.icon} me-2`}),e.label]})},a))}),s.jsx("div",{className:i.mobileMenu,children:(0,s.jsxs)(l.Menu,{children:[s.jsx(l.MenuTrigger,{disableButtonEnhancement:!0,children:s.jsx(l.Button,{icon:s.jsx("i",{className:"bi bi-list"}),iconOnly:!0,appearance:"subtle","aria-label":"Menu"})}),s.jsx(l.MenuPopover,{children:s.jsx(l.MenuList,{children:e.map((e,i)=>s.jsx(l.MenuItem,{onClick:()=>a.push(e.href),icon:s.jsx("i",{className:`bi bi-${e.icon}`}),children:e.label},i))})})]})})]})};d.defaultProps={navItems:[{href:"/",label:"Home",icon:"house"},{href:"/axis1",label:"Axis 1",icon:"1-circle"},{href:"/axis2",label:"Axis 2",icon:"2-circle"},{href:"/axis3",label:"Axis 3",icon:"3-circle"},{href:"/axis4",label:"Axis 4",icon:"4-circle"},{href:"/axis5",label:"Axis 5",icon:"5-circle"},{href:"/axis6",label:"Axis 6",icon:"gear"},{href:"/compliance",label:"Compliance",icon:"check-circle"},{href:"/locations",label:"Locations",icon:"geo-alt"},{href:"/contextual",label:"Context Experts",icon:"person"},{href:"/timeline",label:"Timeline",icon:"clock-history"},{href:"/unified-mapping",label:"Unified Mapping",icon:"geo"},{href:"/compliance-dashboard",label:"SOC 2 Compliance",icon:"shield-check"}]};let h=d},3414:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>n});var s=a(997);a(9090),a(3195),a(6764),a(9462),a(622),a(6689);let n=function({Component:e,pageProps:i}){return s.jsx(e,{...i})}},5949:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>l});var s=a(997),n=a(6859);function l(){return(0,s.jsxs)(n.Html,{lang:"en","data-bs-theme":"dark",children:[s.jsx(n.Head,{children:s.jsx("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"})}),(0,s.jsxs)("body",{children:[s.jsx(n.Main,{}),s.jsx(n.NextScript,{})]})]})}},9462:()=>{},6764:()=>{},622:()=>{}};