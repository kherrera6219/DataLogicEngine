(()=>{var e={};e.id=689,e.ids=[689,660],e.modules={6962:(e,s,a)=>{"use strict";a.r(s),a.d(s,{config:()=>C,default:()=>f,getServerSideProps:()=>S,getStaticPaths:()=>y,getStaticProps:()=>N,reportWebVitals:()=>k,routeModule:()=>A,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>R,unstable_getStaticParams:()=>L,unstable_getStaticPaths:()=>Z,unstable_getStaticProps:()=>w});var i={};a.r(i),a.d(i,{default:()=>v});var t=a(7093),n=a(5244),l=a(1323),r=a(5949),c=a(3414),o=a(997),d=a(968),h=a.n(d),x=a(1398),m=a(6689),u=a(6529),p=a(5401),j=a(7650),g=a(2448);let b=({initialLocations:e})=>{let[s,a]=(0,m.useState)(e||[]),[i,t]=(0,m.useState)(!1),[n,l]=(0,m.useState)(null),[r,c]=(0,m.useState)(null),[d,h]=(0,m.useState)({name:"",type:"",lat:"",lng:"",radius:"50"}),[x,b]=(0,m.useState)("list"),[v,f]=(0,m.useState)([]),N=(0,m.useRef)(null);(0,m.useRef)(null),(0,m.useRef)([]);let y=(0,m.useCallback)(async(e={})=>{t(!0),l(null);try{let s=new URLSearchParams;Object.entries(e).forEach(([e,a])=>{a&&s.append(e,a)});let i=await fetch(`/api/locations?${s.toString()}`),t=await i.json();t.success?a(t.locations||[]):l(t.error||"Failed to fetch locations")}catch(e){l("Error fetching locations: "+e.message)}finally{t(!1)}},[]);(0,m.useEffect)(()=>{y()},[y]);let S=(0,m.useCallback)(()=>{N.current},[s]);(0,m.useEffect)(()=>{s.length>0&&"map"===x&&window.google&&window.google.maps&&S()},[s,x,S]),(0,m.useEffect)(()=>{},[x,S,s.length]);let C=async(e=null)=>{t(!0),l(null);try{let s=new URLSearchParams;e&&s.append("root_uid",e);let a=await fetch(`/api/locations/hierarchy?${s.toString()}`),i=await a.json();i.success?(f(i.hierarchies||[i.hierarchy]),b("hierarchy")):l(i.error||"Failed to fetch location hierarchy")}catch(e){l("Error fetching hierarchy: "+e.message)}finally{t(!1)}},k=e=>{let{name:s,value:a}=e.target;h(e=>({...e,[s]:a}))},w=(e,s=0)=>(0,o.jsxs)("div",{className:"location-hierarchy-node mb-2",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center",style:{paddingLeft:`${20*s}px`},children:[o.jsx("i",{className:`bi bi-geo-alt me-2 ${0===s?"text-primary":""}`}),(0,o.jsxs)("span",{className:`location-name ${0===s?"fw-bold":""}`,onClick:()=>c(e),style:{cursor:"pointer"},children:[e.name,(0,o.jsxs)("span",{className:"text-muted ms-2 small",children:["(",e.location_type,")"]})]})]}),e.children&&e.children.length>0&&o.jsx("div",{className:"children-container",children:e.children.map(e=>w(e,s+1))})]},e.uid);return(0,o.jsxs)("div",{className:"location-manager",children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[o.jsx("h2",{children:"Location Management (Axis 12)"}),(0,o.jsxs)("div",{className:"btn-group",children:[(0,o.jsxs)(u.Z,{variant:"list"===x?"primary":"outline-primary",onClick:()=>b("list"),children:[o.jsx("i",{className:"bi bi-list me-1"})," List View"]}),(0,o.jsxs)(u.Z,{variant:"map"===x?"primary":"outline-primary",onClick:()=>b("map"),children:[o.jsx("i",{className:"bi bi-map me-1"})," Map View"]}),(0,o.jsxs)(u.Z,{variant:"hierarchy"===x?"primary":"outline-primary",onClick:()=>C(),children:[o.jsx("i",{className:"bi bi-diagram-3 me-1"})," Hierarchy"]})]})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-md-4",children:[(0,o.jsxs)(p.Z,{className:"mb-4",children:[o.jsx(p.Z.Header,{children:"Location Search"}),o.jsx(p.Z.Body,{children:(0,o.jsxs)(j.Z,{onSubmit:e=>{e.preventDefault(),y(d)},children:[(0,o.jsxs)(j.Z.Group,{className:"mb-3",children:[o.jsx(j.Z.Label,{children:"Name"}),o.jsx(j.Z.Control,{type:"text",name:"name",placeholder:"Search by name",value:d.name,onChange:k})]}),(0,o.jsxs)(j.Z.Group,{className:"mb-3",children:[o.jsx(j.Z.Label,{children:"Type"}),(0,o.jsxs)(j.Z.Select,{name:"type",value:d.type,onChange:k,children:[o.jsx("option",{value:"",children:"All Types"}),o.jsx("option",{value:"Country",children:"Country"}),o.jsx("option",{value:"State",children:"State/Province"}),o.jsx("option",{value:"City",children:"City"}),o.jsx("option",{value:"County",children:"County"}),o.jsx("option",{value:"Region",children:"Region"}),o.jsx("option",{value:"SupranationalRegion",children:"Supranational Region"})]})]}),(0,o.jsxs)("div",{className:"row",children:[o.jsx("div",{className:"col-6",children:(0,o.jsxs)(j.Z.Group,{className:"mb-3",children:[o.jsx(j.Z.Label,{children:"Latitude"}),o.jsx(j.Z.Control,{type:"number",name:"lat",placeholder:"e.g. 40.7128",value:d.lat,onChange:k,step:"any"})]})}),o.jsx("div",{className:"col-6",children:(0,o.jsxs)(j.Z.Group,{className:"mb-3",children:[o.jsx(j.Z.Label,{children:"Longitude"}),o.jsx(j.Z.Control,{type:"number",name:"lng",placeholder:"e.g. -74.0060",value:d.lng,onChange:k,step:"any"})]})})]}),(0,o.jsxs)(j.Z.Group,{className:"mb-3",children:[o.jsx(j.Z.Label,{children:"Radius (km)"}),o.jsx(j.Z.Control,{type:"number",name:"radius",placeholder:"Search radius in km",value:d.radius,onChange:k,min:"1",max:"5000"})]}),o.jsx("div",{className:"d-grid",children:(0,o.jsxs)(u.Z,{variant:"primary",type:"submit",disabled:i,children:[i?o.jsx(g.Z,{size:"sm",animation:"border"}):o.jsx("i",{className:"bi bi-search me-1"}),"Search Locations"]})})]})})]}),r&&(0,o.jsxs)(p.Z,{className:"location-details",children:[(0,o.jsxs)(p.Z.Header,{className:"d-flex justify-content-between align-items-center",children:[o.jsx("span",{children:"Location Details"}),o.jsx(u.Z,{variant:"link",className:"p-0 text-muted",onClick:()=>c(null),children:o.jsx("i",{className:"bi bi-x-lg"})})]}),(0,o.jsxs)(p.Z.Body,{children:[o.jsx("h4",{children:r.name}),o.jsx("p",{className:"text-muted",children:r.location_type}),r.latitude&&r.longitude&&(0,o.jsxs)("p",{children:[o.jsx("strong",{children:"Coordinates:"})," ",r.latitude,", ",r.longitude]}),r.attributes&&Object.keys(r.attributes).length>0&&(0,o.jsxs)("div",{className:"mt-3",children:[o.jsx("h5",{children:"Attributes"}),o.jsx("ul",{className:"list-unstyled",children:Object.entries(r.attributes).map(([e,s])=>(0,o.jsxs)("li",{className:"mb-1",children:[(0,o.jsxs)("strong",{children:[e,":"]})," ","object"==typeof s?JSON.stringify(s):s]},e))})]}),r.parent&&(0,o.jsxs)("div",{className:"mt-3",children:[o.jsx("h5",{children:"Parent Location"}),(0,o.jsxs)("p",{className:"mb-0 cursor-pointer",onClick:()=>c(r.parent),style:{cursor:"pointer"},children:[o.jsx("i",{className:"bi bi-arrow-up-right me-1"}),r.parent.name," (",r.parent.location_type,")"]})]}),r.children&&r.children.length>0&&(0,o.jsxs)("div",{className:"mt-3",children:[(0,o.jsxs)("h5",{children:["Sub-Locations (",r.children.length,")"]}),(0,o.jsxs)("ul",{className:"list-unstyled",children:[r.children.slice(0,5).map(e=>o.jsx("li",{className:"mb-1",children:(0,o.jsxs)("span",{className:"cursor-pointer",onClick:()=>c(e),style:{cursor:"pointer"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill me-1 small"}),e.name," (",e.location_type,")"]})},e.uid)),r.children.length>5&&(0,o.jsxs)("li",{className:"text-muted small",children:["+ ",r.children.length-5," more locations"]})]})]}),o.jsx("div",{className:"mt-3 d-grid gap-2",children:(0,o.jsxs)(u.Z,{variant:"outline-primary",size:"sm",onClick:()=>C(r.uid),children:[o.jsx("i",{className:"bi bi-diagram-3 me-1"}),"View in Hierarchy"]})})]})]})]}),(0,o.jsxs)("div",{className:"col-md-8",children:[n&&(0,o.jsxs)("div",{className:"alert alert-danger",children:[o.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),n]}),i?(0,o.jsxs)("div",{className:"text-center my-5",children:[o.jsx(g.Z,{animation:"border"}),o.jsx("p",{className:"mt-2",children:"Loading location data..."})]}):(0,o.jsxs)(o.Fragment,{children:["list"===x&&o.jsx("div",{className:"location-list",children:(0,o.jsxs)(p.Z,{children:[o.jsx(p.Z.Header,{children:(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,o.jsxs)("span",{children:["Locations (",s.length,")"]}),o.jsx("div",{children:(0,o.jsxs)(j.Z.Select,{size:"sm",className:"d-inline-block",style:{width:"auto"},onChange:e=>{h(s=>({...s,type:e.target.value})),y({...d,type:e.target.value})},value:d.type,children:[o.jsx("option",{value:"",children:"All Types"}),o.jsx("option",{value:"Country",children:"Countries"}),o.jsx("option",{value:"State",children:"States/Provinces"}),o.jsx("option",{value:"City",children:"Cities"}),o.jsx("option",{value:"County",children:"Counties"}),o.jsx("option",{value:"Region",children:"Regions"})]})})]})}),o.jsx("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table table-hover mb-0",children:[o.jsx("thead",{children:(0,o.jsxs)("tr",{children:[o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Coordinates"}),d.lat&&d.lng&&o.jsx("th",{children:"Distance"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:0===s.length?o.jsx("tr",{children:(0,o.jsxs)("td",{colSpan:"5",className:"text-center py-3",children:[o.jsx("i",{className:"bi bi-inbox me-2"}),"No locations found"]})}):s.map(e=>(0,o.jsxs)("tr",{onClick:()=>c(e),style:{cursor:"pointer"},className:r?.uid===e.uid?"table-primary":"",children:[o.jsx("td",{children:e.name}),o.jsx("td",{children:o.jsx("span",{className:"badge bg-secondary",children:e.location_type})}),o.jsx("td",{children:e.latitude&&e.longitude?(0,o.jsxs)("small",{children:[e.latitude.toFixed(4),", ",e.longitude.toFixed(4)]}):o.jsx("span",{className:"text-muted",children:"N/A"})}),d.lat&&d.lng&&o.jsx("td",{children:void 0!==e.distance?(0,o.jsxs)("span",{children:[e.distance.toFixed(1)," km"]}):o.jsx("span",{className:"text-muted",children:"N/A"})}),o.jsx("td",{children:o.jsx(u.Z,{size:"sm",variant:"link",onClick:s=>{s.stopPropagation(),c(e)},children:o.jsx("i",{className:"bi bi-info-circle"})})})]},e.uid))})]})})]})}),"map"===x&&(0,o.jsxs)(p.Z,{children:[o.jsx(p.Z.Header,{children:"Location Map"}),o.jsx(p.Z.Body,{className:"p-0",children:o.jsx("div",{ref:N,style:{height:"600px",width:"100%"},className:"location-map",children:(0,o.jsxs)("div",{className:"text-center p-5",children:[o.jsx("p",{children:"Loading map..."}),o.jsx(g.Z,{animation:"border"})]})})})]}),"hierarchy"===x&&(0,o.jsxs)(p.Z,{children:[o.jsx(p.Z.Header,{children:"Location Hierarchy"}),o.jsx(p.Z.Body,{children:0===v.length?o.jsx("div",{className:"text-center py-3",children:o.jsx("p",{children:"No hierarchy data available"})}):o.jsx("div",{className:"location-hierarchy",children:v.map(e=>w(e))})})]})]})]})]})]})};function v(){let[e,s]=(0,m.useState)([]),[a,i]=(0,m.useState)(!0),[t,n]=(0,m.useState)(null);return(0,o.jsxs)(x.Z,{children:[(0,o.jsxs)(h(),{children:[o.jsx("title",{children:"UKG - Location Management (Axis 12)"}),o.jsx("meta",{name:"description",content:"Universal Knowledge Graph Location Management"})]}),o.jsx("div",{className:"container-fluid mt-4 mb-5",children:t?(0,o.jsxs)("div",{className:"alert alert-danger",children:[o.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),t]}):a?(0,o.jsxs)("div",{className:"text-center my-5",children:[o.jsx("div",{className:"spinner-border",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})}),o.jsx("p",{className:"mt-2",children:"Loading location data..."})]}):o.jsx(b,{initialLocations:e})})]})}let f=(0,l.l)(i,"default"),N=(0,l.l)(i,"getStaticProps"),y=(0,l.l)(i,"getStaticPaths"),S=(0,l.l)(i,"getServerSideProps"),C=(0,l.l)(i,"config"),k=(0,l.l)(i,"reportWebVitals"),w=(0,l.l)(i,"unstable_getStaticProps"),Z=(0,l.l)(i,"unstable_getStaticPaths"),L=(0,l.l)(i,"unstable_getStaticParams"),P=(0,l.l)(i,"unstable_getServerProps"),R=(0,l.l)(i,"unstable_getServerSideProps"),A=new t.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/locations",pathname:"/locations",bundlePath:"",filename:""},components:{App:c.default,Document:r.default},userland:i})},1398:(e,s,a)=>{"use strict";a.d(s,{Z:()=>c});var i=a(997);a(6689);var t=a(7143);a(1664);var n=a(1163),l=a(8954);let r=(0,t.makeStyles)({container:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{flex:"1 0 auto",...t.shorthands.padding("24px","0"),width:"100%",maxWidth:"100%",overflowX:"hidden"},mainContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...t.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...t.shorthands.padding("0","24px")}},footer:{backgroundColor:"var(--colorNeutralBackground2)",color:"var(--colorNeutralForeground2)",...t.shorthands.padding("16px","0"),marginTop:"32px"},footerContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...t.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...t.shorthands.padding("0","24px")}},footerRow:{display:"flex",flexDirection:"column","@media(min-width: 768px)":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},footerCopyright:{textAlign:"center",marginBottom:"16px","@media(min-width: 768px)":{textAlign:"left",marginBottom:"0"}},socialLinks:{display:"flex",justifyContent:"center",gap:"24px","@media(min-width: 768px)":{justifyContent:"flex-end"}},socialLink:{color:"var(--colorNeutralForeground2)",fontSize:"20px",transition:"color 0.2s",":hover":{color:"var(--colorBrandForeground1)"}}});function c({children:e,className:s}){let a=r();return(0,n.useRouter)(),(0,i.jsxs)("div",{className:a.container,children:[i.jsx(l.Z,{navItems:[{label:"Home",href:"/",icon:"house-door"},{label:"Chat",href:"/chat",icon:"chat-dots"},{label:"About",href:"#about",icon:"info-circle"}]}),i.jsx("main",{className:(0,t.mergeClasses)(a.main,s),children:i.jsx("div",{className:a.mainContent,children:e})}),i.jsx("footer",{className:a.footer,children:i.jsx("div",{className:a.footerContent,children:(0,i.jsxs)("div",{className:a.footerRow,children:[i.jsx("div",{className:a.footerCopyright,children:(0,i.jsxs)(t.Text,{size:200,children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})}),(0,i.jsxs)("div",{className:a.socialLinks,children:[i.jsx("a",{href:"#",className:a.socialLink,"aria-label":"GitHub",children:i.jsx("i",{className:"bi bi-github"})}),i.jsx("a",{href:"#",className:a.socialLink,"aria-label":"Twitter",children:i.jsx("i",{className:"bi bi-twitter"})}),i.jsx("a",{href:"#",className:a.socialLink,"aria-label":"LinkedIn",children:i.jsx("i",{className:"bi bi-linkedin"})})]})]})})})]})}},8954:(e,s,a)=>{"use strict";a.d(s,{Z:()=>h});var i=a(997),t=a(6689),n=a(7143),l=a(1664),r=a.n(l),c=a(1163);let o=(0,n.makeStyles)({navbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"var(--colorNeutralBackground1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...n.shorthands.padding("8px","16px"),height:"60px",width:"100%",position:"sticky",top:0,zIndex:100},brand:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",color:"var(--colorBrandForeground1)",fontWeight:600},logo:{display:"flex",fontSize:"24px"},title:{fontSize:"18px","@media(max-width: 576px)":{display:"none"}},titleShort:{display:"none",fontSize:"18px","@media(max-width: 576px)":{display:"block"}},navItems:{display:"flex",alignItems:"center",gap:"8px","@media(max-width: 768px)":{display:"none"}},mobileMenu:{display:"none","@media(max-width: 768px)":{display:"block"}},navLink:{color:"var(--colorNeutralForeground1)",textDecoration:"none",...n.shorthands.padding("8px","12px"),borderRadius:"4px",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--colorNeutralBackground2)"}},activeNavLink:{backgroundColor:"var(--colorNeutralBackground2)",fontWeight:600}}),d=({navItems:e=[]})=>{let s=o(),a=(0,c.useRouter)(),[l,d]=(0,t.useState)(!1),h=e=>a.pathname===e;return(0,i.jsxs)("nav",{className:s.navbar,children:[(0,i.jsxs)(r(),{href:"/",className:s.brand,children:[i.jsx("span",{className:s.logo,children:i.jsx("i",{className:"bi bi-diagram-3"})}),i.jsx("span",{className:s.title,children:"Universal Knowledge Graph"}),i.jsx("span",{className:s.titleShort,children:"UKG"})]}),i.jsx("div",{className:s.navItems,children:e.map((e,a)=>i.jsx(n.Tooltip,{content:e.label,children:(0,i.jsxs)(r(),{href:e.href,className:`${s.navLink} ${h(e.href)?s.activeNavLink:""}`,children:[e.icon&&i.jsx("i",{className:`bi bi-${e.icon} me-2`}),e.label]})},a))}),i.jsx("div",{className:s.mobileMenu,children:(0,i.jsxs)(n.Menu,{children:[i.jsx(n.MenuTrigger,{disableButtonEnhancement:!0,children:i.jsx(n.Button,{icon:i.jsx("i",{className:"bi bi-list"}),iconOnly:!0,appearance:"subtle","aria-label":"Menu"})}),i.jsx(n.MenuPopover,{children:i.jsx(n.MenuList,{children:e.map((e,s)=>i.jsx(n.MenuItem,{onClick:()=>a.push(e.href),icon:i.jsx("i",{className:`bi bi-${e.icon}`}),children:e.label},s))})})]})})]})};d.defaultProps={navItems:[{href:"/",label:"Home",icon:"house"},{href:"/axis1",label:"Axis 1",icon:"1-circle"},{href:"/axis2",label:"Axis 2",icon:"2-circle"},{href:"/axis3",label:"Axis 3",icon:"3-circle"},{href:"/axis4",label:"Axis 4",icon:"4-circle"},{href:"/axis5",label:"Axis 5",icon:"5-circle"},{href:"/axis6",label:"Axis 6",icon:"gear"},{href:"/compliance",label:"Compliance",icon:"check-circle"},{href:"/locations",label:"Locations",icon:"geo-alt"},{href:"/contextual",label:"Context Experts",icon:"person"},{href:"/timeline",label:"Timeline",icon:"clock-history"},{href:"/unified-mapping",label:"Unified Mapping",icon:"geo"},{href:"/compliance-dashboard",label:"SOC 2 Compliance",icon:"shield-check"}]};let h=d},2448:(e,s,a)=>{"use strict";a.d(s,{Z:()=>o});var i=a(9003),t=a.n(i),n=a(6689),l=a(4728),r=a(997);let c=n.forwardRef(({bsPrefix:e,variant:s,animation:a="border",size:i,as:n="div",className:c,...o},d)=>{e=(0,l.vE)(e,"spinner");let h=`${e}-${a}`;return(0,r.jsx)(n,{ref:d,...o,className:t()(c,h,i&&`${h}-${i}`,s&&`text-${s}`)})});c.displayName="Spinner";let o=c},3414:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});var i=a(997);a(9090),a(3195),a(6764),a(9462),a(622),a(7501),a(6689);let t=function({Component:e,pageProps:s}){return i.jsx(e,{...s})}},5949:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var i=a(997),t=a(6859);function n(){return(0,i.jsxs)(t.Html,{lang:"en","data-bs-theme":"dark",children:[i.jsx(t.Head,{children:i.jsx("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"})}),(0,i.jsxs)("body",{children:[i.jsx(t.Main,{}),i.jsx(t.NextScript,{})]})]})}},7501:()=>{},9462:()=>{},6764:()=>{},622:()=>{},7143:e=>{"use strict";e.exports=require("@fluentui/react-components")},9642:e=>{"use strict";e.exports=require("@restart/ui/Button")},9003:e=>{"use strict";e.exports=require("classnames")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},580:e=>{"use strict";e.exports=require("prop-types")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5548:e=>{"use strict";e.exports=require("warning")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),i=s.X(0,[859,855,371],()=>a(6962));module.exports=i})();