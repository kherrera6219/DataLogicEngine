(()=>{var e={};e.id=180,e.ids=[180,660],e.modules={9975:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>b,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>u,routeModule:()=>y,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>g});var i=t(7093),n=t(5244),l=t(1323),r=t(5949),c=t(3414),o=t(6380),d=e([o]);o=(d.then?(await d)():d)[0];let m=(0,l.l)(o,"default"),h=(0,l.l)(o,"getStaticProps"),x=(0,l.l)(o,"getStaticPaths"),p=(0,l.l)(o,"getServerSideProps"),b=(0,l.l)(o,"config"),u=(0,l.l)(o,"reportWebVitals"),g=(0,l.l)(o,"unstable_getStaticProps"),j=(0,l.l)(o,"unstable_getStaticPaths"),f=(0,l.l)(o,"unstable_getStaticParams"),N=(0,l.l)(o,"unstable_getServerProps"),v=(0,l.l)(o,"unstable_getServerSideProps"),y=new i.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/chat",pathname:"/chat",bundlePath:"",filename:""},components:{App:c.default,Document:r.default},userland:o});a()}catch(e){a(e)}})},1398:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var a=t(997);t(6689);var i=t(7143);t(1664);var n=t(1163),l=t(8954);let r=(0,i.makeStyles)({container:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{flex:"1 0 auto",...i.shorthands.padding("24px","0"),width:"100%",maxWidth:"100%",overflowX:"hidden"},mainContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...i.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...i.shorthands.padding("0","24px")}},footer:{backgroundColor:"var(--colorNeutralBackground2)",color:"var(--colorNeutralForeground2)",...i.shorthands.padding("16px","0"),marginTop:"32px"},footerContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...i.shorthands.padding("0","16px"),"@media(min-width: 576px)":{...i.shorthands.padding("0","24px")}},footerRow:{display:"flex",flexDirection:"column","@media(min-width: 768px)":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},footerCopyright:{textAlign:"center",marginBottom:"16px","@media(min-width: 768px)":{textAlign:"left",marginBottom:"0"}},socialLinks:{display:"flex",justifyContent:"center",gap:"24px","@media(min-width: 768px)":{justifyContent:"flex-end"}},socialLink:{color:"var(--colorNeutralForeground2)",fontSize:"20px",transition:"color 0.2s",":hover":{color:"var(--colorBrandForeground1)"}}});function c({children:e,className:s}){let t=r();return(0,n.useRouter)(),(0,a.jsxs)("div",{className:t.container,children:[a.jsx(l.Z,{navItems:[{label:"Home",href:"/",icon:"house-door"},{label:"Chat",href:"/chat",icon:"chat-dots"},{label:"About",href:"#about",icon:"info-circle"}]}),a.jsx("main",{className:(0,i.mergeClasses)(t.main,s),children:a.jsx("div",{className:t.mainContent,children:e})}),a.jsx("footer",{className:t.footer,children:a.jsx("div",{className:t.footerContent,children:(0,a.jsxs)("div",{className:t.footerRow,children:[a.jsx("div",{className:t.footerCopyright,children:(0,a.jsxs)(i.Text,{size:200,children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})}),(0,a.jsxs)("div",{className:t.socialLinks,children:[a.jsx("a",{href:"#",className:t.socialLink,"aria-label":"GitHub",children:a.jsx("i",{className:"bi bi-github"})}),a.jsx("a",{href:"#",className:t.socialLink,"aria-label":"Twitter",children:a.jsx("i",{className:"bi bi-twitter"})}),a.jsx("a",{href:"#",className:t.socialLink,"aria-label":"LinkedIn",children:a.jsx("i",{className:"bi bi-linkedin"})})]})]})})})]})}},8954:(e,s,t)=>{"use strict";t.d(s,{Z:()=>m});var a=t(997),i=t(6689),n=t(7143),l=t(1664),r=t.n(l),c=t(1163);let o=(0,n.makeStyles)({navbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"var(--colorNeutralBackground1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...n.shorthands.padding("8px","16px"),height:"60px",width:"100%",position:"sticky",top:0,zIndex:100},brand:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",color:"var(--colorBrandForeground1)",fontWeight:600},logo:{display:"flex",fontSize:"24px"},title:{fontSize:"18px","@media(max-width: 576px)":{display:"none"}},titleShort:{display:"none",fontSize:"18px","@media(max-width: 576px)":{display:"block"}},navItems:{display:"flex",alignItems:"center",gap:"8px","@media(max-width: 768px)":{display:"none"}},mobileMenu:{display:"none","@media(max-width: 768px)":{display:"block"}},navLink:{color:"var(--colorNeutralForeground1)",textDecoration:"none",...n.shorthands.padding("8px","12px"),borderRadius:"4px",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--colorNeutralBackground2)"}},activeNavLink:{backgroundColor:"var(--colorNeutralBackground2)",fontWeight:600}}),d=({navItems:e=[]})=>{let s=o(),t=(0,c.useRouter)(),[l,d]=(0,i.useState)(!1),m=e=>t.pathname===e;return(0,a.jsxs)("nav",{className:s.navbar,children:[(0,a.jsxs)(r(),{href:"/",className:s.brand,children:[a.jsx("span",{className:s.logo,children:a.jsx("i",{className:"bi bi-diagram-3"})}),a.jsx("span",{className:s.title,children:"Universal Knowledge Graph"}),a.jsx("span",{className:s.titleShort,children:"UKG"})]}),a.jsx("div",{className:s.navItems,children:e.map((e,t)=>a.jsx(n.Tooltip,{content:e.label,children:(0,a.jsxs)(r(),{href:e.href,className:`${s.navLink} ${m(e.href)?s.activeNavLink:""}`,children:[e.icon&&a.jsx("i",{className:`bi bi-${e.icon} me-2`}),e.label]})},t))}),a.jsx("div",{className:s.mobileMenu,children:(0,a.jsxs)(n.Menu,{children:[a.jsx(n.MenuTrigger,{disableButtonEnhancement:!0,children:a.jsx(n.Button,{icon:a.jsx("i",{className:"bi bi-list"}),iconOnly:!0,appearance:"subtle","aria-label":"Menu"})}),a.jsx(n.MenuPopover,{children:a.jsx(n.MenuList,{children:e.map((e,s)=>a.jsx(n.MenuItem,{onClick:()=>t.push(e.href),icon:a.jsx("i",{className:`bi bi-${e.icon}`}),children:e.label},s))})})]})})]})};d.defaultProps={navItems:[{href:"/",label:"Home",icon:"house"},{href:"/axis1",label:"Axis 1",icon:"1-circle"},{href:"/axis2",label:"Axis 2",icon:"2-circle"},{href:"/axis3",label:"Axis 3",icon:"3-circle"},{href:"/axis4",label:"Axis 4",icon:"4-circle"},{href:"/axis5",label:"Axis 5",icon:"5-circle"},{href:"/axis6",label:"Axis 6",icon:"gear"},{href:"/compliance",label:"Compliance",icon:"check-circle"},{href:"/locations",label:"Locations",icon:"geo-alt"},{href:"/contextual",label:"Context Experts",icon:"person"},{href:"/timeline",label:"Timeline",icon:"clock-history"},{href:"/unified-mapping",label:"Unified Mapping",icon:"geo"},{href:"/compliance-dashboard",label:"SOC 2 Compliance",icon:"shield-check"}]};let m=d},3414:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(997);t(9090),t(3195),t(6764),t(9462),t(622),t(7501),t(6689);let i=function({Component:e,pageProps:s}){return a.jsx(e,{...s})}},5949:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(997),i=t(6859);function n(){return(0,a.jsxs)(i.Html,{lang:"en","data-bs-theme":"dark",children:[a.jsx(i.Head,{children:a.jsx("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"})}),(0,a.jsxs)("body",{children:[a.jsx(i.Main,{}),a.jsx(i.NextScript,{})]})]})}},6380:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>m});var i=t(997),n=t(6689),l=t(968),r=t.n(l),c=t(1398),o=t(8974),d=e([o]);function m(){let[e,s]=(0,n.useState)([]),[t,a]=(0,n.useState)(""),[l,d]=(0,n.useState)([]),[m,h]=(0,n.useState)(null),[x,p]=(0,n.useState)("New Conversation"),[b,u]=(0,n.useState)(!1),[g,j]=(0,n.useState)({confidenceThreshold:.85,enableLocationContext:!0,enableResearchAgents:!0,personas:{ke:!0,se:!0,re:!0,ce:!0}}),f=["Summarize the 13 axes with one example per axis.","Draft a SOC 2 control checklist for a new vendor.","Map these requirements to the honeycomb crosswalk.","Show me the regulatory spiderweb for healthcare."],N=[{label:"Latency",value:"42ms",tone:"success"},{label:"Token stream",value:"2.1k/s",tone:"info"},{label:"Confidence",value:`${Math.round(100*g.confidenceThreshold)}%`,tone:"warning"}],v=(0,n.useRef)(null),y=(0,n.useRef)(null),w=async()=>{if(!t.trim())return;let e={id:Date.now().toString(),type:"user",content:t,timestamp:new Date().toISOString()};s(s=>[...s,e]),a(""),u(!0);try{let e=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,target_confidence:g.confidenceThreshold,chat_id:m,use_location_context:g.enableLocationContext,use_research_agents:g.enableResearchAgents,active_personas:Object.entries(g.personas).filter(([e,s])=>s).map(([e])=>e.toUpperCase())})}),a=await e.json();if(!m&&a.chat_id){h(a.chat_id);let e={id:a.chat_id,title:C(t),created:new Date().toISOString(),lastUpdated:new Date().toISOString()};d(s=>[e,...s]),p(e.title),localStorage.setItem("ukg_chat_history",JSON.stringify([e,...l]))}let i={id:`response-${Date.now()}`,type:"system",content:a.error?`Error: ${a.error}`:a.response,confidence:a.confidence,timestamp:new Date().toISOString()};s(e=>[...e,i])}catch(t){let e={id:`error-${Date.now()}`,type:"error",content:"Sorry, there was an error processing your request. Please try again.",timestamp:new Date().toISOString()};s(s=>[...s,e])}finally{u(!1)}},k=()=>{s([{id:"welcome",type:"system",content:`# Welcome to the UKG Chat System

A comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph. How can I help you today?`}]),h(null),p("New Conversation")},S=e=>{let t=l.find(s=>s.id===e);t&&(h(e),p(t.title),s([{id:"welcome",type:"system",content:`# ${t.title}

Continuing your previous conversation.`}]))},C=e=>e?e.length>30?e.substring(0,30)+"...":e:"New Conversation";return(0,i.jsxs)(c.Z,{children:[i.jsx(r(),{children:i.jsx("title",{children:"UKG Chat Interface"})}),(0,i.jsxs)("div",{className:"chat-shell",children:[(0,i.jsxs)("aside",{className:"chat-sidebar p-3 d-flex flex-column gap-3",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"section-title mb-1",children:"Sessions"}),i.jsx("h5",{className:"mb-0",children:"AI Workbench"})]}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-outline-light btn-sm rounded-pill",onClick:k,children:i.jsx("i",{className:"bi bi-plus-lg"})}),i.jsx("button",{className:"btn btn-outline-light btn-sm rounded-pill",onClick:()=>a("/cmd "),children:i.jsx("i",{className:"bi bi-command"})})]})]}),(0,i.jsxs)("div",{className:"d-grid gap-2",children:[0===l.length&&(0,i.jsxs)("div",{className:"glass-border p-3 text-center text-white-50",children:[i.jsx("i",{className:"bi bi-chat-square-text fs-3 d-block mb-2"}),"Start a new conversation"]}),l.map(e=>i.jsx("div",{className:`glass-border p-3 cursor-pointer ${m===e.id?"bg-primary bg-opacity-10":""}`,onClick:()=>S(e.id),children:(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"bi bi-chat-left-text"}),i.jsx("strong",{children:e.title})]}),i.jsx("span",{className:"badge bg-secondary",children:new Date(e.created).toLocaleDateString()})]})},e.id))]}),(0,i.jsxs)("div",{className:"d-grid gap-2",children:[(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",onClick:()=>{confirm("Are you sure you want to clear all chat history? This cannot be undone.")&&(d([]),localStorage.removeItem("ukg_chat_history"),k())},children:[i.jsx("i",{className:"bi bi-trash me-2"})," Clear history"]}),(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-cloud-download me-2"})," Export transcript"]})]})]}),(0,i.jsxs)("section",{className:"chat-window",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"section-title mb-1",children:"Streaming chat"}),i.jsx("h5",{className:"mb-0 text-white",children:x})]}),i.jsx("div",{className:"d-flex gap-2 flex-wrap",children:N.map(e=>(0,i.jsxs)("span",{className:`badge bg-${e.tone} bg-opacity-25 text-${e.tone}`,children:[e.label,": ",e.value]},e.label))})]}),(0,i.jsxs)("div",{className:"d-flex gap-2 flex-wrap mb-2",children:[(0,i.jsxs)("span",{className:"action-chip",children:[i.jsx("i",{className:"bi bi-mic me-2"}),"Voice input"]}),(0,i.jsxs)("span",{className:"action-chip",children:[i.jsx("i",{className:"bi bi-paperclip me-2"}),"Attachments"]}),(0,i.jsxs)("span",{className:"action-chip",children:[i.jsx("i",{className:"bi bi-diagram-3 me-2"}),"Graph context"]}),(0,i.jsxs)("span",{className:"action-chip",children:[i.jsx("i",{className:"bi bi-shield-lock me-2"}),"Audit trail"]})]}),(0,i.jsxs)("div",{className:"flex-grow-1 overflow-auto",style:{minHeight:"320px"},children:[0===e.length?(0,i.jsxs)("div",{className:"glass-border p-4 text-center",children:[i.jsx("h4",{className:"text-white",children:"Welcome to the UKG Chat System"}),i.jsx("p",{className:"text-white-50",children:"Pick a persona mix, provide a prompt, or jump into a knowledge graph query."}),i.jsx("div",{className:"d-flex gap-2 flex-wrap justify-content-center",children:f.map(e=>i.jsx("button",{className:"btn btn-outline-light btn-sm rounded-pill",onClick:()=>a(e),children:e},e))})]}):e.map(e=>i.jsx("div",{className:`message-bubble ${e.type} mb-2`,children:(0,i.jsxs)("div",{className:"d-flex align-items-start gap-2",children:[i.jsx("div",{className:"avatar bg-primary bg-opacity-25 rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:i.jsx("i",{className:`bi ${"user"===e.type?"bi-person":"bi-robot"}`})}),(0,i.jsxs)("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:o.marked.parse(e.content)}}),e.confidence&&(0,i.jsxs)("small",{className:"text-white-50",children:["Confidence: ",e.confidence]})]})]})},e.id)),b&&i.jsx("div",{className:"message-bubble system mb-2",children:(0,i.jsxs)("div",{className:"typing-indicator",children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]})}),i.jsx("div",{ref:v})]}),(0,i.jsxs)("div",{className:"glass-border p-3 input-rail",children:[(0,i.jsxs)("div",{className:"d-flex gap-2 align-items-center mb-2 flex-wrap",children:[i.jsx("span",{className:"badge bg-secondary",children:"Cmd/Ctrl + K: Command palette"}),i.jsx("span",{className:"badge bg-secondary",children:"Shift + Enter: New line"}),i.jsx("span",{className:"badge bg-secondary",children:"Streaming on"})]}),(0,i.jsxs)("div",{className:"position-relative",children:[i.jsx("textarea",{className:"form-control bg-dark text-white",placeholder:"Ask a question, paste context, or use /commands...",rows:"2",value:t,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w())},ref:y}),t&&i.jsx("button",{className:"btn btn-sm btn-link position-absolute top-0 end-0 text-secondary",type:"button",onClick:()=>a(""),style:{zIndex:5},children:i.jsx("i",{className:"bi bi-x-circle"})})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3 flex-wrap gap-2",children:[(0,i.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-upload"})," Upload"]}),(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-mic"})," Voice"]}),(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-braces"})," Code"]})]}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-outline-light rounded-pill",onClick:k,children:"New chat"}),i.jsx("button",{className:"btn btn-primary rounded-pill",type:"button",onClick:w,disabled:!t.trim()||b,children:b?"Streamingâ€¦":"Send"})]})]})]})]}),(0,i.jsxs)("aside",{className:"context-panel p-3 d-flex flex-column gap-3",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"section-title mb-1",children:"Context"}),i.jsx("h6",{className:"mb-2",children:"Personas"}),i.jsx("div",{className:"d-grid gap-2",children:[{id:"ke",label:"Knowledge Expert",icon:"book"},{id:"se",label:"Skill Expert",icon:"tools"},{id:"re",label:"Role Expert",icon:"person-badge"},{id:"ce",label:"Context Expert",icon:"geo-alt"}].map(e=>(0,i.jsxs)("label",{className:"d-flex align-items-center justify-content-between glass-border p-2",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:`bi bi-${e.icon}`}),e.label]}),i.jsx("div",{className:"form-check form-switch m-0",children:i.jsx("input",{className:"form-check-input",type:"checkbox",checked:g.personas[e.id],onChange:s=>j({...g,personas:{...g.personas,[e.id]:s.target.checked}})})})]},e.id))})]}),(0,i.jsxs)("div",{className:"glass-border p-3",children:[i.jsx("p",{className:"section-title mb-1",children:"Telemetry"}),(0,i.jsxs)("div",{className:"d-grid gap-2",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("span",{children:"Confidence target"}),i.jsx("strong",{children:g.confidenceThreshold})]}),i.jsx("input",{type:"range",className:"form-range",min:"0.6",max:"0.95",step:"0.05",value:g.confidenceThreshold,onChange:e=>j({...g,confidenceThreshold:parseFloat(e.target.value)})}),(0,i.jsxs)("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enable-location-context",checked:g.enableLocationContext,onChange:e=>j({...g,enableLocationContext:e.target.checked})}),i.jsx("label",{className:"form-check-label",htmlFor:"enable-location-context",children:"Location context"})]}),(0,i.jsxs)("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enable-research-agents",checked:g.enableResearchAgents,onChange:e=>j({...g,enableResearchAgents:e.target.checked})}),i.jsx("label",{className:"form-check-label",htmlFor:"enable-research-agents",children:"Research agents"})]})]})]}),(0,i.jsxs)("div",{className:"glass-border p-3",children:[i.jsx("p",{className:"section-title mb-1",children:"Recent prompts"}),i.jsx("ul",{className:"list-unstyled mb-0",children:f.slice(0,3).map(e=>(0,i.jsxs)("li",{className:"mb-2 small",children:[i.jsx("i",{className:"bi bi-lightning-charge me-2 text-primary"}),e]},e))})]}),(0,i.jsxs)("div",{className:"glass-border p-3",children:[i.jsx("p",{className:"section-title mb-1",children:"Actions"}),(0,i.jsxs)("div",{className:"d-grid gap-2",children:[(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-shield-check me-2"}),"Compliance scan"]}),(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-diagram-2 me-2"}),"Open knowledge graph"]}),(0,i.jsxs)("button",{className:"btn btn-outline-light btn-sm rounded-pill",children:[i.jsx("i",{className:"bi bi-file-earmark-text me-2"}),"Generate report"]})]})]})]})]})]})}o=(d.then?(await d)():d)[0],a()}catch(e){a(e)}})},7501:()=>{},9462:()=>{},6764:()=>{},622:()=>{},7143:e=>{"use strict";e.exports=require("@fluentui/react-components")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},8974:e=>{"use strict";e.exports=import("marked")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[859,855],()=>t(9975));module.exports=a})();