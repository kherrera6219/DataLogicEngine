"use strict";(()=>{var e={};e.id=123,e.ids=[123],e.modules={9424:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.r(s),l.d(s,{config:()=>u,default:()=>p,getServerSideProps:()=>m,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>_,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>g});var i=l(7093),r=l(5244),a=l(1323),n=l(5949),d=l(3414),c=l(611),o=e([c]);c=(o.then?(await o)():o)[0];let p=(0,a.l)(c,"default"),x=(0,a.l)(c,"getStaticProps"),h=(0,a.l)(c,"getStaticPaths"),m=(0,a.l)(c,"getServerSideProps"),u=(0,a.l)(c,"config"),j=(0,a.l)(c,"reportWebVitals"),g=(0,a.l)(c,"unstable_getStaticProps"),v=(0,a.l)(c,"unstable_getStaticPaths"),b=(0,a.l)(c,"unstable_getStaticParams"),y=(0,a.l)(c,"unstable_getServerProps"),S=(0,a.l)(c,"unstable_getServerSideProps"),_=new i.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/pillars",pathname:"/pillars",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:c});t()}catch(e){t(e)}})},5605:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.d(s,{Z:()=>c});var i=l(997),r=l(6689),a=l(1873),n=l(2210),d=e([n]);function c({initialPillarId:e}){let[s,l]=(0,r.useState)([]),[t,d]=(0,r.useState)(e||""),[c,o]=(0,r.useState)(null),[p,x]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[u,j]=(0,r.useState)([]);(0,n.useToast)();let g=async(e,s=null)=>{if(e){m(!0);try{let l=await fetch(`/api/pillars/${e}/expand`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context_text:s})});if(l.ok){let s=await l.json();o(s),v(e)}else{let e=await l.json();showToast({title:"Error",description:e.error||"Failed to expand pillar",status:"error",duration:5e3})}}catch(e){showToast({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3})}finally{m(!1)}}},v=async e=>{try{let s=await fetch(`/api/pillars/mappings?pillar_id=${e}`);if(s.ok){let e=await s.json();j(e)}}catch(e){}},b=e=>{d(e),x(""),o(null),e&&g(e)},y=async(e,s,l)=>{try{let i=await fetch("/api/pillars/mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_pillar_id:t,source_sublevel_id:e,target_pillar_id:s,target_sublevel_id:l,mapping_type:"related_to",strength:.7,bidirectional:!0})});if(i.ok)showToast({title:"Success",description:"Mapping created successfully",status:"success",duration:3e3}),v(t);else{let e=await i.json();showToast({title:"Error",description:e.error||"Failed to create mapping",status:"error",duration:5e3})}}catch(e){showToast({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3})}},S=(e,s=0)=>e&&Array.isArray(e)&&0!==e.length?i.jsx("div",{children:e.map(e=>(0,i.jsxs)("div",{style:{marginLeft:`${20*s}px`,marginBottom:"8px"},children:[(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[i.jsx(a.Ct,{color:0===s?"primary":1===s?"info":"secondary",children:e.id}),i.jsx(a.xv,{ml:2,fontWeight:0===s?"bold":"normal",children:e.label||e.name}),c&&c.related_pillars&&c.related_pillars.length>0&&i.jsx(a.Lt,{className:"ms-auto",title:"Map to...",variant:"outline-secondary",size:"sm",children:c.related_pillars.map(s=>(0,i.jsxs)("div",{className:"dropdown-item",children:[i.jsx("strong",{children:s.pillar_id}),s.mappings&&s.mappings.map(l=>(0,i.jsxs)(a.zx,{size:"sm",variant:"link",className:"d-block text-start",onClick:()=>y(e.id,s.pillar_id,l.target_sublevel),children:["Map to ",l.target_sublevel]},`${l.target_sublevel}`))]},s.pillar_id))})]}),e.description&&i.jsx(a.xv,{fontSize:"sm",color:"gray.600",ml:3,children:e.description}),e.sublevels&&S(e.sublevels,s+1)]},e.id))}):i.jsx(a.xv,{color:"gray.500",ml:4*s,children:"No sublevels defined"});return i.jsx("div",{children:(0,i.jsxs)(a.Zb,{className:"mb-4",children:[i.jsx(a.Zb.Header,{children:i.jsx(a.Zb.Title,{children:"Knowledge Pillar Dynamic Mapping"})}),(0,i.jsxs)(a.Zb.Body,{children:[(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx(a.__,{htmlFor:"pillarSelect",children:"Select Pillar Level:"}),i.jsx(a.Lt,{title:t||"Select a Pillar",id:"pillarSelect",children:s.map(e=>(0,i.jsxs)(a.Lt.Item,{onClick:()=>b(e.id),children:[e.id,": ",e.label||e.name]},e.id))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx(a.__,{htmlFor:"contextText",children:"Context for Expansion:"}),i.jsx(a.gx,{id:"contextText",value:p,onChange:e=>x(e.target.value),placeholder:"Enter text to provide context for dynamic mapping expansion...",rows:4}),i.jsx("div",{className:"mt-2",children:i.jsx(a.zx,{onClick:()=>{t?g(t,p):showToast({title:"Warning",description:"Please select a pillar first",status:"warning",duration:3e3})},disabled:!t||h,isLoading:h,children:c?"Re-expand with Context":"Expand with Context"})})]}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h4",{className:"mb-3",children:["Pillar Structure: ",c.pillar_name," (",c.pillar_id,")"]}),(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("h5",{children:"Base Sublevels"}),S(c.base_sublevels)]}),c.expanded_sublevels&&c.expanded_sublevels.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("h5",{children:"Expanded Sublevels"}),S(c.expanded_sublevels)]}),c.related_pillars&&c.related_pillars.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("h5",{children:"Related Pillars"}),i.jsx("div",{className:"row",children:c.related_pillars.map(e=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(a.Zb,{children:(0,i.jsxs)(a.Zb.Body,{children:[(0,i.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[i.jsx("h6",{className:"mb-0",children:e.pillar_id}),i.jsx(a.Ct,{className:"ms-2",color:e.suggested?"warning":"success",children:e.suggested?"Suggested":"Mapped"}),(0,i.jsxs)(a.xv,{className:"ms-auto",children:["Strength: ",e.strength.toFixed(2)]})]}),e.mappings&&e.mappings.length>0&&(0,i.jsxs)("div",{children:[i.jsx(a.xv,{fontSize:"sm",fontWeight:"bold",children:"Existing Mappings:"}),i.jsx("ul",{className:"list-unstyled ms-3",children:e.mappings.map((e,s)=>i.jsx("li",{children:(0,i.jsxs)(a.xv,{fontSize:"sm",children:[e.source_sublevel||"source"," â†’ ",e.target_sublevel||"target",e.mapping_type&&` (${e.mapping_type})`]})},s))})]}),e.reason&&i.jsx(a.xv,{fontSize:"sm",fontStyle:"italic",color:"gray.500",mt:1,children:e.reason})]})})},e.pillar_id))})]}),u&&u.length>0&&(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("h5",{children:"All Dynamic Mappings"}),i.jsx("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table table-sm",children:[i.jsx("thead",{children:(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"Source"}),i.jsx("th",{children:"Target"}),i.jsx("th",{children:"Type"}),i.jsx("th",{children:"Strength"})]})}),i.jsx("tbody",{children:u.map((e,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[e.source.pillar_id,".",e.source.sublevel_id]}),(0,i.jsxs)("td",{children:[e.target.pillar_id,".",e.target.sublevel_id]}),i.jsx("td",{children:e.mapping_type}),i.jsx("td",{children:e.strength.toFixed(2)})]},s))})]})})]})]})]})]})})}n=(d.then?(await d)():d)[0],t()}catch(e){t(e)}})},611:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.r(s),l.d(s,{default:()=>x});var i=l(997),r=l(6689),a=l(968),n=l.n(a),d=l(1398),c=l(5605),o=l(1873),p=e([c]);function x(){let[e,s]=(0,r.useState)([]),[l,t]=(0,r.useState)(!0),[a,p]=(0,r.useState)(null);return(0,i.jsxs)(d.Z,{children:[(0,i.jsxs)(n(),{children:[i.jsx("title",{children:"UKG - Knowledge Pillar System"}),i.jsx("meta",{name:"description",content:"Universal Knowledge Graph Pillar Level Management"})]}),i.jsx("div",{className:"container-fluid my-4",children:i.jsx("div",{className:"row",children:(0,i.jsxs)("div",{className:"col-12",children:[i.jsx("h1",{className:"mb-4",children:"Knowledge Pillar System (Axis 1)"}),a&&i.jsx("div",{className:"alert alert-danger",children:a}),l?i.jsx("div",{className:"d-flex justify-content-center my-5",children:i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Zb,{className:"mb-4",children:[i.jsx(o.Zb.Header,{children:i.jsx(o.Zb.Title,{children:"Pillar Levels Overview"})}),i.jsx(o.Zb.Body,{children:i.jsx("div",{className:"row",children:e.map(e=>i.jsx("div",{className:"col-md-4 col-sm-6 mb-3",children:i.jsx(o.Zb,{children:(0,i.jsxs)(o.Zb.Body,{children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[i.jsx("h5",{className:"mb-1",children:e.id}),i.jsx(o.zx,{size:"sm",variant:"outline-primary",href:`/pillars?id=${e.id}`,children:"Map"})]}),i.jsx(o.xv,{fontWeight:"bold",children:e.label||e.name}),i.jsx(o.xv,{fontSize:"sm",children:e.description}),(0,i.jsxs)(o.xv,{fontSize:"xs",className:"text-muted mt-2",children:["Sublevels: ",e.sublevels&&Array.isArray(e.sublevels)?e.sublevels.length:Object.keys(e.sublevels||{}).length||0]})]})})},e.id))})})]}),(0,i.jsxs)("div",{className:"my-5",children:[i.jsx("h2",{className:"mb-4",children:"Dynamic Pillar Mapping Engine"}),i.jsx(c.Z,{initialPillarId:void 0})]})]})]})})})]})}c=(p.then?(await p)():p)[0],t()}catch(e){t(e)}})},7143:e=>{e.exports=require("@fluentui/react-components")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},2210:e=>{e.exports=import("@chakra-ui/react")}};var s=require("../webpack-runtime.js");s.C(e);var l=e=>s(s.s=e),t=s.X(0,[859,855,26],()=>l(9424));module.exports=t})();