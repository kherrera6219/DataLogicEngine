"use strict";(()=>{var e={};e.id=123,e.ids=[123],e.modules={9424:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.r(s),l.d(s,{config:()=>u,default:()=>p,getServerSideProps:()=>m,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>_,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>g});var r=l(7093),a=l(5244),i=l(1323),n=l(5949),d=l(3414),c=l(611),o=e([c]);c=(o.then?(await o)():o)[0];let p=(0,i.l)(c,"default"),x=(0,i.l)(c,"getStaticProps"),h=(0,i.l)(c,"getStaticPaths"),m=(0,i.l)(c,"getServerSideProps"),u=(0,i.l)(c,"config"),j=(0,i.l)(c,"reportWebVitals"),g=(0,i.l)(c,"unstable_getStaticProps"),b=(0,i.l)(c,"unstable_getStaticPaths"),v=(0,i.l)(c,"unstable_getStaticParams"),y=(0,i.l)(c,"unstable_getServerProps"),S=(0,i.l)(c,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/pillars",pathname:"/pillars",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:c});t()}catch(e){t(e)}})},5605:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.d(s,{Z:()=>c});var r=l(997),a=l(6689),i=l(1971),n=l(2210),d=e([n]);function c({initialPillarId:e}){let[s,l]=(0,a.useState)([]),[t,d]=(0,a.useState)(e||""),[c,o]=(0,a.useState)(null),[p,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[u,j]=(0,a.useState)([]);(0,n.useToast)();let g=async(e,s=null)=>{if(e){m(!0);try{let l=await fetch(`/api/pillars/${e}/expand`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context_text:s})});if(l.ok){let s=await l.json();o(s),b(e)}else{let e=await l.json();showToast({title:"Error",description:e.error||"Failed to expand pillar",status:"error",duration:5e3})}}catch(e){console.error("Error expanding pillar:",e),showToast({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3})}finally{m(!1)}}},b=async e=>{try{let s=await fetch(`/api/pillars/mappings?pillar_id=${e}`);if(s.ok){let e=await s.json();j(e)}}catch(e){console.error("Error fetching mappings:",e)}},v=e=>{d(e),x(""),o(null),e&&g(e)},y=async(e,s,l)=>{try{let r=await fetch("/api/pillars/mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_pillar_id:t,source_sublevel_id:e,target_pillar_id:s,target_sublevel_id:l,mapping_type:"related_to",strength:.7,bidirectional:!0})});if(r.ok)showToast({title:"Success",description:"Mapping created successfully",status:"success",duration:3e3}),b(t);else{let e=await r.json();showToast({title:"Error",description:e.error||"Failed to create mapping",status:"error",duration:5e3})}}catch(e){console.error("Error creating mapping:",e),showToast({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3})}},S=(e,s=0)=>e&&Array.isArray(e)&&0!==e.length?r.jsx("div",{children:e.map(e=>(0,r.jsxs)("div",{style:{marginLeft:`${20*s}px`,marginBottom:"8px"},children:[(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[r.jsx(i.Ct,{color:0===s?"primary":1===s?"info":"secondary",children:e.id}),r.jsx(i.Text,{ml:2,fontWeight:0===s?"bold":"normal",children:e.label||e.name}),c&&c.related_pillars&&c.related_pillars.length>0&&r.jsx(i.Dropdown,{className:"ms-auto",title:"Map to...",variant:"outline-secondary",size:"sm",children:c.related_pillars.map(s=>(0,r.jsxs)("div",{className:"dropdown-item",children:[r.jsx("strong",{children:s.pillar_id}),s.mappings&&s.mappings.map(l=>(0,r.jsxs)(i.zx,{size:"sm",variant:"link",className:"d-block text-start",onClick:()=>y(e.id,s.pillar_id,l.target_sublevel),children:["Map to ",l.target_sublevel]},`${l.target_sublevel}`))]},s.pillar_id))})]}),e.description&&r.jsx(i.Text,{fontSize:"sm",color:"gray.600",ml:3,children:e.description}),e.sublevels&&S(e.sublevels,s+1)]},e.id))}):r.jsx(i.Text,{color:"gray.500",ml:4*s,children:"No sublevels defined"});return r.jsx("div",{children:(0,r.jsxs)(i.Zb,{className:"mb-4",children:[r.jsx(i.Zb.Header,{children:r.jsx(i.Zb.Title,{children:"Knowledge Pillar Dynamic Mapping"})}),(0,r.jsxs)(i.Zb.Body,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx(i.Label,{htmlFor:"pillarSelect",children:"Select Pillar Level:"}),r.jsx(i.Dropdown,{title:t||"Select a Pillar",id:"pillarSelect",children:s.map(e=>(0,r.jsxs)(i.Dropdown.Item,{onClick:()=>v(e.id),children:[e.id,": ",e.label||e.name]},e.id))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx(i.Label,{htmlFor:"contextText",children:"Context for Expansion:"}),r.jsx(i.Textarea,{id:"contextText",value:p,onChange:e=>x(e.target.value),placeholder:"Enter text to provide context for dynamic mapping expansion...",rows:4}),r.jsx("div",{className:"mt-2",children:r.jsx(i.zx,{onClick:()=>{t?g(t,p):showToast({title:"Warning",description:"Please select a pillar first",status:"warning",duration:3e3})},disabled:!t||h,isLoading:h,children:c?"Re-expand with Context":"Expand with Context"})})]}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h4",{className:"mb-3",children:["Pillar Structure: ",c.pillar_name," (",c.pillar_id,")"]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{children:"Base Sublevels"}),S(c.base_sublevels)]}),c.expanded_sublevels&&c.expanded_sublevels.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{children:"Expanded Sublevels"}),S(c.expanded_sublevels)]}),c.related_pillars&&c.related_pillars.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{children:"Related Pillars"}),r.jsx("div",{className:"row",children:c.related_pillars.map(e=>r.jsx("div",{className:"col-md-6 mb-3",children:r.jsx(i.Zb,{children:(0,r.jsxs)(i.Zb.Body,{children:[(0,r.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[r.jsx("h6",{className:"mb-0",children:e.pillar_id}),r.jsx(i.Ct,{className:"ms-2",color:e.suggested?"warning":"success",children:e.suggested?"Suggested":"Mapped"}),(0,r.jsxs)(i.Text,{className:"ms-auto",children:["Strength: ",e.strength.toFixed(2)]})]}),e.mappings&&e.mappings.length>0&&(0,r.jsxs)("div",{children:[r.jsx(i.Text,{fontSize:"sm",fontWeight:"bold",children:"Existing Mappings:"}),r.jsx("ul",{className:"list-unstyled ms-3",children:e.mappings.map((e,s)=>r.jsx("li",{children:(0,r.jsxs)(i.Text,{fontSize:"sm",children:[e.source_sublevel||"source"," â†’ ",e.target_sublevel||"target",e.mapping_type&&` (${e.mapping_type})`]})},s))})]}),e.reason&&r.jsx(i.Text,{fontSize:"sm",fontStyle:"italic",color:"gray.500",mt:1,children:e.reason})]})})},e.pillar_id))})]}),u&&u.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{children:"All Dynamic Mappings"}),r.jsx("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Source"}),r.jsx("th",{children:"Target"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Strength"})]})}),r.jsx("tbody",{children:u.map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[e.source.pillar_id,".",e.source.sublevel_id]}),(0,r.jsxs)("td",{children:[e.target.pillar_id,".",e.target.sublevel_id]}),r.jsx("td",{children:e.mapping_type}),r.jsx("td",{children:e.strength.toFixed(2)})]},s))})]})})]})]})]})]})})}n=(d.then?(await d)():d)[0],t()}catch(e){t(e)}})},611:(e,s,l)=>{l.a(e,async(e,t)=>{try{l.r(s),l.d(s,{default:()=>x});var r=l(997),a=l(6689),i=l(968),n=l.n(i),d=l(1398),c=l(5605),o=l(1971),p=e([c]);function x(){let[e,s]=(0,a.useState)([]),[l,t]=(0,a.useState)(!0),[i,p]=(0,a.useState)(null);return(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(n(),{children:[r.jsx("title",{children:"UKG - Knowledge Pillar System"}),r.jsx("meta",{name:"description",content:"Universal Knowledge Graph Pillar Level Management"})]}),r.jsx("div",{className:"container-fluid my-4",children:r.jsx("div",{className:"row",children:(0,r.jsxs)("div",{className:"col-12",children:[r.jsx("h1",{className:"mb-4",children:"Knowledge Pillar System (Axis 1)"}),i&&r.jsx("div",{className:"alert alert-danger",children:i}),l?r.jsx("div",{className:"d-flex justify-content-center my-5",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Zb,{className:"mb-4",children:[r.jsx(o.Zb.Header,{children:r.jsx(o.Zb.Title,{children:"Pillar Levels Overview"})}),r.jsx(o.Zb.Body,{children:r.jsx("div",{className:"row",children:e.map(e=>r.jsx("div",{className:"col-md-4 col-sm-6 mb-3",children:r.jsx(o.Zb,{children:(0,r.jsxs)(o.Zb.Body,{children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[r.jsx("h5",{className:"mb-1",children:e.id}),r.jsx(o.zx,{size:"sm",variant:"outline-primary",href:`/pillars?id=${e.id}`,children:"Map"})]}),r.jsx(o.Text,{fontWeight:"bold",children:e.label||e.name}),r.jsx(o.Text,{fontSize:"sm",children:e.description}),(0,r.jsxs)(o.Text,{fontSize:"xs",className:"text-muted mt-2",children:["Sublevels: ",e.sublevels&&Array.isArray(e.sublevels)?e.sublevels.length:Object.keys(e.sublevels||{}).length||0]})]})})},e.id))})})]}),(0,r.jsxs)("div",{className:"my-5",children:[r.jsx("h2",{className:"mb-4",children:"Dynamic Pillar Mapping Engine"}),r.jsx(c.Z,{initialPillarId:void 0})]})]})]})})})]})}c=(p.then?(await p)():p)[0],t()}catch(e){t(e)}})},7143:e=>{e.exports=require("@fluentui/react-components")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},2210:e=>{e.exports=import("@chakra-ui/react")}};var s=require("../webpack-runtime.js");s.C(e);var l=e=>s(s.s=e),t=s.X(0,[859,855,853],()=>l(9424));module.exports=t})();