"use strict";(()=>{var e={};e.id=123,e.ids=[123],e.modules={609:(e,s,l)=>{l.r(s),l.d(s,{config:()=>_,default:()=>g,getServerSideProps:()=>S,getStaticPaths:()=>v,getStaticProps:()=>b,reportWebVitals:()=>f,routeModule:()=>C,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>T,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>y});var r={};l.r(r),l.d(r,{default:()=>j});var t=l(7093),i=l(5244),a=l(1323),n=l(5949),d=l(3414),c=l(997),o=l(6689),p=l(968),x=l.n(p),h=l(1398),m=l(1971);function u({initialPillarId:e}){let[s,l]=(0,o.useState)([]),[r,t]=(0,o.useState)(e||""),[i,a]=(0,o.useState)(null),[n,d]=(0,o.useState)(""),[p,x]=(0,o.useState)(!1),[h,u]=(0,o.useState)([]),j=Object(function(){var e=Error("Cannot find module '@chakra-ui/react'");throw e.code="MODULE_NOT_FOUND",e}())(),g=async(e,s=null)=>{if(e){x(!0);try{let l=await fetch(`/api/pillars/${e}/expand`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context_text:s})});if(l.ok){let s=await l.json();a(s),b(e)}else{let e=await l.json();j({title:"Error",description:e.error||"Failed to expand pillar",status:"error",duration:5e3,isClosable:!0})}}catch(e){console.error("Error expanding pillar:",e),j({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}}},b=async e=>{try{let s=await fetch(`/api/pillars/mappings?pillar_id=${e}`);if(s.ok){let e=await s.json();u(e)}}catch(e){console.error("Error fetching mappings:",e)}},v=e=>{t(e),d(""),a(null),e&&g(e)},S=async(e,s,l)=>{try{let t=await fetch("/api/pillars/mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_pillar_id:r,source_sublevel_id:e,target_pillar_id:s,target_sublevel_id:l,mapping_type:"related_to",strength:.7,bidirectional:!0})});if(t.ok)j({title:"Success",description:"Mapping created successfully",status:"success",duration:3e3,isClosable:!0}),b(r);else{let e=await t.json();j({title:"Error",description:e.error||"Failed to create mapping",status:"error",duration:5e3,isClosable:!0})}}catch(e){console.error("Error creating mapping:",e),j({title:"Error",description:"An unexpected error occurred",status:"error",duration:5e3,isClosable:!0})}},_=(e,s=0)=>e&&Array.isArray(e)&&0!==e.length?c.jsx("div",{children:e.map(e=>(0,c.jsxs)("div",{style:{marginLeft:`${20*s}px`,marginBottom:"8px"},children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[c.jsx(m.Ct,{color:0===s?"primary":1===s?"info":"secondary",children:e.id}),c.jsx(m.Text,{ml:2,fontWeight:0===s?"bold":"normal",children:e.label||e.name}),i&&i.related_pillars&&i.related_pillars.length>0&&c.jsx(m.Dropdown,{className:"ms-auto",title:"Map to...",variant:"outline-secondary",size:"sm",children:i.related_pillars.map(s=>(0,c.jsxs)("div",{className:"dropdown-item",children:[c.jsx("strong",{children:s.pillar_id}),s.mappings&&s.mappings.map(l=>(0,c.jsxs)(m.zx,{size:"sm",variant:"link",className:"d-block text-start",onClick:()=>S(e.id,s.pillar_id,l.target_sublevel),children:["Map to ",l.target_sublevel]},`${l.target_sublevel}`))]},s.pillar_id))})]}),e.description&&c.jsx(m.Text,{fontSize:"sm",color:"gray.600",ml:3,children:e.description}),e.sublevels&&_(e.sublevels,s+1)]},e.id))}):c.jsx(m.Text,{color:"gray.500",ml:4*s,children:"No sublevels defined"});return c.jsx("div",{children:(0,c.jsxs)(m.Zb,{className:"mb-4",children:[c.jsx(m.Zb.Header,{children:c.jsx(m.Zb.Title,{children:"Knowledge Pillar Dynamic Mapping"})}),(0,c.jsxs)(m.Zb.Body,{children:[(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx(m.Label,{htmlFor:"pillarSelect",children:"Select Pillar Level:"}),c.jsx(m.Dropdown,{title:r||"Select a Pillar",id:"pillarSelect",children:s.map(e=>(0,c.jsxs)(m.Dropdown.Item,{onClick:()=>v(e.id),children:[e.id,": ",e.label||e.name]},e.id))})]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx(m.Label,{htmlFor:"contextText",children:"Context for Expansion:"}),c.jsx(m.Textarea,{id:"contextText",value:n,onChange:e=>d(e.target.value),placeholder:"Enter text to provide context for dynamic mapping expansion...",rows:4}),c.jsx("div",{className:"mt-2",children:c.jsx(m.zx,{onClick:()=>{r?g(r,n):j({title:"Warning",description:"Please select a pillar first",status:"warning",duration:3e3,isClosable:!0})},disabled:!r||p,isLoading:p,children:i?"Re-expand with Context":"Expand with Context"})})]}),i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h4",{className:"mb-3",children:["Pillar Structure: ",i.pillar_name," (",i.pillar_id,")"]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("h5",{children:"Base Sublevels"}),_(i.base_sublevels)]}),i.expanded_sublevels&&i.expanded_sublevels.length>0&&(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("h5",{children:"Expanded Sublevels"}),_(i.expanded_sublevels)]}),i.related_pillars&&i.related_pillars.length>0&&(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("h5",{children:"Related Pillars"}),c.jsx("div",{className:"row",children:i.related_pillars.map(e=>c.jsx("div",{className:"col-md-6 mb-3",children:c.jsx(m.Zb,{children:(0,c.jsxs)(m.Zb.Body,{children:[(0,c.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[c.jsx("h6",{className:"mb-0",children:e.pillar_id}),c.jsx(m.Ct,{className:"ms-2",color:e.suggested?"warning":"success",children:e.suggested?"Suggested":"Mapped"}),(0,c.jsxs)(m.Text,{className:"ms-auto",children:["Strength: ",e.strength.toFixed(2)]})]}),e.mappings&&e.mappings.length>0&&(0,c.jsxs)("div",{children:[c.jsx(m.Text,{fontSize:"sm",fontWeight:"bold",children:"Existing Mappings:"}),c.jsx("ul",{className:"list-unstyled ms-3",children:e.mappings.map((e,s)=>c.jsx("li",{children:(0,c.jsxs)(m.Text,{fontSize:"sm",children:[e.source_sublevel||"source"," â†’ ",e.target_sublevel||"target",e.mapping_type&&` (${e.mapping_type})`]})},s))})]}),e.reason&&c.jsx(m.Text,{fontSize:"sm",fontStyle:"italic",color:"gray.500",mt:1,children:e.reason})]})})},e.pillar_id))})]}),h&&h.length>0&&(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("h5",{children:"All Dynamic Mappings"}),c.jsx("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-sm",children:[c.jsx("thead",{children:(0,c.jsxs)("tr",{children:[c.jsx("th",{children:"Source"}),c.jsx("th",{children:"Target"}),c.jsx("th",{children:"Type"}),c.jsx("th",{children:"Strength"})]})}),c.jsx("tbody",{children:h.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[e.source.pillar_id,".",e.source.sublevel_id]}),(0,c.jsxs)("td",{children:[e.target.pillar_id,".",e.target.sublevel_id]}),c.jsx("td",{children:e.mapping_type}),c.jsx("td",{children:e.strength.toFixed(2)})]},s))})]})})]})]})]})]})})}function j(){let[e,s]=(0,o.useState)([]),[l,r]=(0,o.useState)(!0),[t,i]=(0,o.useState)(null);return(0,c.jsxs)(h.Z,{children:[(0,c.jsxs)(x(),{children:[c.jsx("title",{children:"UKG - Knowledge Pillar System"}),c.jsx("meta",{name:"description",content:"Universal Knowledge Graph Pillar Level Management"})]}),c.jsx("div",{className:"container-fluid my-4",children:c.jsx("div",{className:"row",children:(0,c.jsxs)("div",{className:"col-12",children:[c.jsx("h1",{className:"mb-4",children:"Knowledge Pillar System (Axis 1)"}),t&&c.jsx("div",{className:"alert alert-danger",children:t}),l?c.jsx("div",{className:"d-flex justify-content-center my-5",children:c.jsx("div",{className:"spinner-border text-primary",role:"status",children:c.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(m.Zb,{className:"mb-4",children:[c.jsx(m.Zb.Header,{children:c.jsx(m.Zb.Title,{children:"Pillar Levels Overview"})}),c.jsx(m.Zb.Body,{children:c.jsx("div",{className:"row",children:e.map(e=>c.jsx("div",{className:"col-md-4 col-sm-6 mb-3",children:c.jsx(m.Zb,{children:(0,c.jsxs)(m.Zb.Body,{children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between",children:[c.jsx("h5",{className:"mb-1",children:e.id}),c.jsx(m.zx,{size:"sm",variant:"outline-primary",href:`/pillars?id=${e.id}`,children:"Map"})]}),c.jsx(m.Text,{fontWeight:"bold",children:e.label||e.name}),c.jsx(m.Text,{fontSize:"sm",children:e.description}),(0,c.jsxs)(m.Text,{fontSize:"xs",className:"text-muted mt-2",children:["Sublevels: ",e.sublevels&&Array.isArray(e.sublevels)?e.sublevels.length:Object.keys(e.sublevels||{}).length||0]})]})})},e.id))})})]}),(0,c.jsxs)("div",{className:"my-5",children:[c.jsx("h2",{className:"mb-4",children:"Dynamic Pillar Mapping Engine"}),c.jsx(u,{initialPillarId:void 0})]})]})]})})})]})}!function(){var e=Error("Cannot find module '@chakra-ui/react'");throw e.code="MODULE_NOT_FOUND",e}();let g=(0,a.l)(r,"default"),b=(0,a.l)(r,"getStaticProps"),v=(0,a.l)(r,"getStaticPaths"),S=(0,a.l)(r,"getServerSideProps"),_=(0,a.l)(r,"config"),f=(0,a.l)(r,"reportWebVitals"),y=(0,a.l)(r,"unstable_getStaticProps"),N=(0,a.l)(r,"unstable_getStaticPaths"),P=(0,a.l)(r,"unstable_getStaticParams"),w=(0,a.l)(r,"unstable_getServerProps"),T=(0,a.l)(r,"unstable_getServerSideProps"),C=new t.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/pillars",pathname:"/pillars",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:r})},7143:e=>{e.exports=require("@fluentui/react-components")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var l=e=>s(s.s=e),r=s.X(0,[859,855,853],()=>l(609));module.exports=r})();