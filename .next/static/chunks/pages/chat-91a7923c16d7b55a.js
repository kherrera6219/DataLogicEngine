(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{7722:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(1689)}])},6153:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(5893),n=a(1664),c=a.n(n);function l(e){let{children:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{children:(0,t.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)(c(),{href:"/",className:"navbar-brand",children:"Universal Knowledge Graph"}),(0,t.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,t.jsx)("span",{className:"navbar-toggler-icon"})}),(0,t.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:(0,t.jsxs)("ul",{className:"navbar-nav",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(c(),{href:"/",className:"nav-link",children:"Home"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(c(),{href:"/chat",className:"nav-link",children:"Chat"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{className:"nav-link",href:"#about",children:"About"})})]})})]})})}),(0,t.jsx)("main",{className:"container py-4",children:s}),(0,t.jsx)("footer",{className:"bg-dark text-light py-3 mt-5",children:(0,t.jsx)("div",{className:"container text-center",children:(0,t.jsxs)("p",{children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})})})]})}},1689:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(5893),n=a(7294),c=a(9008),l=a.n(c),i=a(6153),r=a(7441);function o(){let[e,s]=(0,n.useState)([]),[a,c]=(0,n.useState)(""),[o,d]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),[x,b]=(0,n.useState)("New Conversation"),[p,g]=(0,n.useState)(!1),[u,j]=(0,n.useState)({confidenceThreshold:.85,enableLocationContext:!0,enableResearchAgents:!0,personas:{ke:!0,se:!0,re:!0,ce:!0}}),N=(0,n.useRef)(null),v=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("ukg_chat_history");e&&d(JSON.parse(e))}catch(e){console.error("Failed to load chat history:",e)}})(),s([{id:"welcome",type:"system",content:"# Welcome to the UKG Chat System\n\nA comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph. How can I help you today?"}])},[]),(0,n.useEffect)(()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,n.useEffect)(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=v.current.scrollHeight+"px")},[a]);let f=async()=>{if(!a.trim())return;let e={id:Date.now().toString(),type:"user",content:a,timestamp:new Date().toISOString()};s(s=>[...s,e]),c(""),g(!0);try{let e=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,target_confidence:u.confidenceThreshold,chat_id:h,use_location_context:u.enableLocationContext,use_research_agents:u.enableResearchAgents,active_personas:Object.entries(u.personas).filter(e=>{let[s,a]=e;return a}).map(e=>{let[s]=e;return s.toUpperCase()})})}),t=await e.json();if(!h&&t.chat_id){m(t.chat_id);let e={id:t.chat_id,title:w(a),created:new Date().toISOString(),lastUpdated:new Date().toISOString()};d(s=>[e,...s]),b(e.title),localStorage.setItem("ukg_chat_history",JSON.stringify([e,...o]))}let n={id:"response-".concat(Date.now()),type:"system",content:t.error?"Error: ".concat(t.error):t.response,confidence:t.confidence,timestamp:new Date().toISOString()};s(e=>[...e,n])}catch(a){console.error("Error sending message:",a);let e={id:"error-".concat(Date.now()),type:"error",content:"Sorry, there was an error processing your request. Please try again.",timestamp:new Date().toISOString()};s(s=>[...s,e])}finally{g(!1)}},y=()=>{s([{id:"welcome",type:"system",content:"# Welcome to the UKG Chat System\n\nA comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph. How can I help you today?"}]),m(null),b("New Conversation")},k=e=>{let a=o.find(s=>s.id===e);a&&(m(e),b(a.title),s([{id:"welcome",type:"system",content:"# ".concat(a.title,"\n\nContinuing your previous conversation.")}]))},w=e=>e?e.length>30?e.substring(0,30)+"...":e:"New Conversation";return(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(l(),{children:(0,t.jsx)("title",{children:"UKG Chat Interface"})}),(0,t.jsxs)("div",{className:"chat-container",children:[(0,t.jsxs)("div",{className:"chat-sidebar",children:[(0,t.jsxs)("div",{className:"sidebar-header",children:[(0,t.jsx)("h3",{children:"UKG Chat"}),(0,t.jsxs)("button",{id:"new-chat-btn",className:"btn btn-sm btn-primary",onClick:y,children:[(0,t.jsx)("i",{className:"bi bi-plus-lg"})," New Chat"]})]}),(0,t.jsx)("div",{className:"chat-history",id:"chat-history",children:o.length>0?o.map(e=>(0,t.jsxs)("div",{className:"chat-history-item ".concat(h===e.id?"active":""),onClick:()=>k(e.id),children:[(0,t.jsx)("i",{className:"bi bi-chat-left-text"}),(0,t.jsx)("span",{className:"chat-title",children:e.title})]},e.id)):(0,t.jsx)("div",{className:"no-history",children:"No chat history"})}),(0,t.jsx)("div",{className:"sidebar-footer",children:(0,t.jsxs)("button",{id:"clear-chats-btn",className:"btn btn-sm btn-outline-danger",onClick:()=>{confirm("Are you sure you want to clear all chat history? This cannot be undone.")&&(d([]),localStorage.removeItem("ukg_chat_history"),y())},children:[(0,t.jsx)("i",{className:"bi bi-trash"})," Clear All Chats"]})})]}),(0,t.jsxs)("div",{className:"chat-main",children:[(0,t.jsxs)("div",{className:"chat-header",children:[(0,t.jsx)("div",{className:"current-chat-title",id:"current-chat-title",children:x}),(0,t.jsxs)("div",{className:"chat-options",children:[(0,t.jsxs)("button",{id:"export-chat-btn",className:"btn btn-sm btn-outline-secondary",children:[(0,t.jsx)("i",{className:"bi bi-download"})," Export"]}),(0,t.jsx)("button",{id:"settings-btn",className:"btn btn-sm btn-outline-secondary","data-bs-toggle":"modal","data-bs-target":"#settings-modal",children:(0,t.jsx)("i",{className:"bi bi-gear"})})]})]}),(0,t.jsxs)("div",{className:"chat-messages",id:"chat-messages",children:[0===e.length?(0,t.jsxs)("div",{className:"welcome-message",children:[(0,t.jsx)("h2",{children:"Welcome to the UKG Chat System"}),(0,t.jsx)("p",{children:"A comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph."}),(0,t.jsxs)("div",{className:"suggestion-chips",children:[(0,t.jsx)("div",{className:"chip",onClick:()=>c("How does the UKG system work?"),children:"How does the UKG system work?"}),(0,t.jsx)("div",{className:"chip",onClick:()=>c("Tell me about the 13 axes of knowledge"),children:"Tell me about the 13 axes of knowledge"}),(0,t.jsx)("div",{className:"chip",onClick:()=>c("What are knowledge algorithms?"),children:"What are knowledge algorithms?"})]})]}):e.map(e=>(0,t.jsx)("div",{className:"message ".concat(e.type),children:"user"===e.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"message-avatar",children:(0,t.jsx)("i",{className:"bi bi-person-circle"})}),(0,t.jsx)("div",{className:"message-content",children:(0,t.jsx)("div",{className:"message-text",children:e.content})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"message-avatar system-avatar",children:(0,t.jsx)("i",{className:"bi bi-robot"})}),(0,t.jsxs)("div",{className:"message-content",children:[(0,t.jsx)("div",{className:"message-text markdown-content",dangerouslySetInnerHTML:{__html:r.TU.parse(e.content)}}),e.confidence&&(0,t.jsx)("div",{className:"message-metadata",children:(0,t.jsxs)("span",{className:"confidence-badge",children:["Confidence: ",e.confidence]})})]})]})},e.id)),p&&(0,t.jsxs)("div",{className:"message system",children:[(0,t.jsx)("div",{className:"message-avatar system-avatar",children:(0,t.jsx)("i",{className:"bi bi-robot"})}),(0,t.jsx)("div",{className:"message-content",children:(0,t.jsx)("div",{className:"message-text",children:(0,t.jsxs)("div",{className:"typing-indicator",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})})})]}),(0,t.jsx)("div",{ref:N})]}),(0,t.jsxs)("div",{className:"chat-input-container",children:[(0,t.jsx)("textarea",{id:"chat-input",placeholder:"Type your message here...",rows:"1",className:"form-control",value:a,onChange:e=>{c(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},ref:v,disabled:p}),(0,t.jsxs)("div",{className:"input-buttons",children:[(0,t.jsx)("button",{id:"attach-btn",className:"btn btn-sm btn-outline-secondary",title:"Attach files",children:(0,t.jsx)("i",{className:"bi bi-paperclip"})}),(0,t.jsx)("button",{id:"send-btn",className:"btn btn-primary",onClick:f,disabled:!a.trim()||p,children:(0,t.jsx)("i",{className:"bi bi-send"})})]})]})]}),(0,t.jsx)("div",{className:"modal fade",id:"settings-modal",tabIndex:"-1","aria-hidden":"true",children:(0,t.jsx)("div",{className:"modal-dialog",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h5",{className:"modal-title",children:"Chat Settings"}),(0,t.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("label",{htmlFor:"confidence-threshold",className:"form-label",children:["Target Confidence: ",(0,t.jsx)("span",{id:"confidence-value",children:u.confidenceThreshold})]}),(0,t.jsx)("input",{type:"range",className:"form-range",id:"confidence-threshold",min:"0.6",max:"0.95",step:"0.05",value:u.confidenceThreshold,onChange:e=>j({...u,confidenceThreshold:parseFloat(e.target.value)})})]}),(0,t.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-location-context",checked:u.enableLocationContext,onChange:e=>j({...u,enableLocationContext:e.target.checked})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"enable-location-context",children:"Enable Location Context"})]}),(0,t.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-research-agents",checked:u.enableResearchAgents,onChange:e=>j({...u,enableResearchAgents:e.target.checked})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"enable-research-agents",children:"Enable Research Agents"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Active Personas"}),(0,t.jsxs)("div",{className:"persona-toggles",children:[(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ke",checked:u.personas.ke,onChange:e=>j({...u,personas:{...u.personas,ke:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-ke",children:"Knowledge Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-se",checked:u.personas.se,onChange:e=>j({...u,personas:{...u.personas,se:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-se",children:"Skill Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-re",checked:u.personas.re,onChange:e=>j({...u,personas:{...u.personas,re:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-re",children:"Role Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ce",checked:u.personas.ce,onChange:e=>j({...u,personas:{...u.personas,ce:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-ce",children:"Context Expert"})]})]})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",id:"save-settings",onClick:()=>{let e=document.getElementById("settings-modal");e&&bootstrap.Modal.getInstance(e).hide()},children:"Save changes"})]})]})})})]})]})}}},function(e){e.O(0,[996,441,888,774,179],function(){return e(e.s=7722)}),_N_E=e.O()}]);