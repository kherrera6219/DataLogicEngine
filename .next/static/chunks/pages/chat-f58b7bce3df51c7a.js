(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{7722:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(1689)}])},3965:function(e,s,a){"use strict";a.d(s,{Z:function(){return y}});var t=a(5893),n=a(7294),i=a(2874),c=a(4695),l=a(2715),r=a(6608),o=a(1664),d=a.n(o),h=a(1163),m=a(765),x=a(2085),p=a(3371),b=a(7730),u=a(3096),g=a(8577),j=a(1389);let f=(0,i.Z)({navbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"var(--colorNeutralBackground1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...c.q5.padding("8px","16px"),height:"60px",width:"100%",position:"sticky",top:0,zIndex:100},brand:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",color:"var(--colorBrandForeground1)",fontWeight:600},logo:{display:"flex",fontSize:"24px"},title:{fontSize:"18px","@media(max-width: 576px)":{display:"none"}},titleShort:{display:"none",fontSize:"18px","@media(max-width: 576px)":{display:"block"}},navItems:{display:"flex",alignItems:"center",gap:"8px","@media(max-width: 768px)":{display:"none"}},mobileMenu:{display:"none","@media(max-width: 768px)":{display:"block"}},navLink:{color:"var(--colorNeutralForeground1)",textDecoration:"none",...c.q5.padding("8px","12px"),borderRadius:"4px",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--colorNeutralBackground2)"}},activeNavLink:{backgroundColor:"var(--colorNeutralBackground2)",fontWeight:600}});var N=e=>{let{navItems:s=[]}=e,a=f(),i=(0,h.useRouter)(),[c,l]=(0,n.useState)(!1),r=e=>i.pathname===e;return(0,t.jsxs)("nav",{className:a.navbar,children:[(0,t.jsxs)(d(),{href:"/",className:a.brand,children:[(0,t.jsx)("span",{className:a.logo,children:(0,t.jsx)("i",{className:"bi bi-diagram-3"})}),(0,t.jsx)("span",{className:a.title,children:"Universal Knowledge Graph"}),(0,t.jsx)("span",{className:a.titleShort,children:"UKG"})]}),(0,t.jsx)("div",{className:a.navItems,children:s.map((e,s)=>(0,t.jsx)(m.u,{content:e.label,children:(0,t.jsxs)(d(),{href:e.href,className:"".concat(a.navLink," ").concat(r(e.href)?a.activeNavLink:""),children:[e.icon&&(0,t.jsx)("i",{className:"bi bi-".concat(e.icon," me-2")}),e.label]})},s))}),(0,t.jsx)("div",{className:a.mobileMenu,children:(0,t.jsxs)(x.v,{children:[(0,t.jsx)(p.b,{disableButtonEnhancement:!0,children:(0,t.jsx)(b.z,{icon:(0,t.jsx)("i",{className:"bi bi-list"}),iconOnly:!0,appearance:"subtle","aria-label":"Menu"})}),(0,t.jsx)(u.Y,{children:(0,t.jsx)(g.q,{children:s.map((e,s)=>(0,t.jsx)(j.s,{onClick:()=>i.push(e.href),icon:(0,t.jsx)("i",{className:"bi bi-".concat(e.icon)}),children:e.label},s))})})]})})]})};let v=(0,i.Z)({container:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{flex:"1 0 auto",...c.q5.padding("24px","0"),width:"100%",maxWidth:"100%",overflowX:"hidden"},mainContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...c.q5.padding("0","16px"),"@media(min-width: 576px)":{...c.q5.padding("0","24px")}},footer:{backgroundColor:"var(--colorNeutralBackground2)",color:"var(--colorNeutralForeground2)",...c.q5.padding("16px","0"),marginTop:"32px"},footerContent:{maxWidth:"1400px",marginLeft:"auto",marginRight:"auto",...c.q5.padding("0","16px"),"@media(min-width: 576px)":{...c.q5.padding("0","24px")}},footerRow:{display:"flex",flexDirection:"column","@media(min-width: 768px)":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},footerCopyright:{textAlign:"center",marginBottom:"16px","@media(min-width: 768px)":{textAlign:"left",marginBottom:"0"}},socialLinks:{display:"flex",justifyContent:"center",gap:"24px","@media(min-width: 768px)":{justifyContent:"flex-end"}},socialLink:{color:"var(--colorNeutralForeground2)",fontSize:"20px",transition:"color 0.2s",":hover":{color:"var(--colorBrandForeground1)"}}});function y(e){let{children:s,className:a}=e,n=v();return(0,h.useRouter)(),(0,t.jsxs)("div",{className:n.container,children:[(0,t.jsx)(N,{navItems:[{label:"Home",href:"/",icon:"house-door"},{label:"Chat",href:"/chat",icon:"chat-dots"},{label:"About",href:"#about",icon:"info-circle"}]}),(0,t.jsx)("main",{className:(0,l.z)(n.main,a),children:(0,t.jsx)("div",{className:n.mainContent,children:s})}),(0,t.jsx)("footer",{className:n.footer,children:(0,t.jsx)("div",{className:n.footerContent,children:(0,t.jsxs)("div",{className:n.footerRow,children:[(0,t.jsx)("div",{className:n.footerCopyright,children:(0,t.jsxs)(r.x,{size:200,children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})}),(0,t.jsxs)("div",{className:n.socialLinks,children:[(0,t.jsx)("a",{href:"#",className:n.socialLink,"aria-label":"GitHub",children:(0,t.jsx)("i",{className:"bi bi-github"})}),(0,t.jsx)("a",{href:"#",className:n.socialLink,"aria-label":"Twitter",children:(0,t.jsx)("i",{className:"bi bi-twitter"})}),(0,t.jsx)("a",{href:"#",className:n.socialLink,"aria-label":"LinkedIn",children:(0,t.jsx)("i",{className:"bi bi-linkedin"})})]})]})})})]})}},1689:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(5893),n=a(7294),i=a(9008),c=a.n(i),l=a(3965),r=a(7441);function o(){let[e,s]=(0,n.useState)([]),[i,o]=(0,n.useState)(""),[d,h]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),[p,b]=(0,n.useState)("New Conversation"),[u,g]=(0,n.useState)(!1),[j,f]=(0,n.useState)({confidenceThreshold:.85,enableLocationContext:!0,enableResearchAgents:!0,personas:{ke:!0,se:!0,re:!0,ce:!0}}),N=(0,n.useRef)(null),v=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("ukg_chat_history");e&&h(JSON.parse(e))}catch(e){console.error("Failed to load chat history:",e)}})(),s([{id:"welcome",type:"system",content:"# Welcome to the UKG Chat System\n\nA comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph. How can I help you today?"}])},[]),(0,n.useEffect)(()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,n.useEffect)(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=v.current.scrollHeight+"px")},[i]);let y=async()=>{if(!i.trim())return;let e={id:Date.now().toString(),type:"user",content:i,timestamp:new Date().toISOString()};s(s=>[...s,e]),o(""),g(!0);try{let e=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i,target_confidence:j.confidenceThreshold,chat_id:m,use_location_context:j.enableLocationContext,use_research_agents:j.enableResearchAgents,active_personas:Object.entries(j.personas).filter(e=>{let[s,a]=e;return a}).map(e=>{let[s]=e;return s.toUpperCase()})})}),a=await e.json();if(!m&&a.chat_id){x(a.chat_id);let e={id:a.chat_id,title:w(i),created:new Date().toISOString(),lastUpdated:new Date().toISOString()};h(s=>[e,...s]),b(e.title),localStorage.setItem("ukg_chat_history",JSON.stringify([e,...d]))}let t={id:"response-".concat(Date.now()),type:"system",content:a.error?"Error: ".concat(a.error):a.response,confidence:a.confidence,timestamp:new Date().toISOString()};s(e=>[...e,t])}catch(a){console.error("Error sending message:",a);let e={id:"error-".concat(Date.now()),type:"error",content:"Sorry, there was an error processing your request. Please try again.",timestamp:new Date().toISOString()};s(s=>[...s,e])}finally{g(!1)}},k=e=>{let a=d.find(s=>s.id===e);a&&(x(e),b(a.title),s([{id:"welcome",type:"system",content:"# ".concat(a.title,"\n\nContinuing your previous conversation.")}]))},w=e=>e?e.length>30?e.substring(0,30)+"...":e:"New Conversation";return(0,n.useEffect)(()=>{a.e(455).then(a.bind(a,1455)).then(e=>{let s=e.initResponsiveHandlers();return()=>s()})},[]),(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(c(),{children:(0,t.jsx)("title",{children:"UKG Chat Interface"})}),(0,t.jsxs)("div",{className:"chat-container",children:[(0,t.jsxs)("div",{className:"chat-sidebar",children:[(0,t.jsxs)("div",{className:"sidebar-header",children:[(0,t.jsx)("h5",{className:"mb-0",children:"Chat History"}),(0,t.jsx)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:(0,t.jsx)("i",{className:"bi bi-plus-lg"})})]}),(0,t.jsxs)("div",{className:"chat-history",children:[d.map((e,s)=>(0,t.jsxs)("div",{className:"chat-history-item ".concat(m===e.id?"active":""),onClick:()=>k(e.id),children:[(0,t.jsx)("i",{className:"bi bi-chat-left-text"}),e.title]},s)),0===d.length&&(0,t.jsxs)("div",{className:"text-center text-muted p-3",children:[(0,t.jsx)("i",{className:"bi bi-chat-square-text fs-3 mb-2"}),(0,t.jsx)("p",{children:"No chat history yet"})]})]}),(0,t.jsx)("div",{className:"sidebar-footer",children:(0,t.jsxs)("button",{className:"btn btn-outline-light btn-sm w-100 d-flex align-items-center justify-content-center",children:[(0,t.jsx)("i",{className:"bi bi-trash me-2"}),"Clear History"]})})]}),(0,t.jsx)("button",{className:"sidebar-toggle",children:(0,t.jsx)("i",{className:"bi bi-list"})}),(0,t.jsxs)("div",{className:"chat-main",children:[(0,t.jsxs)("div",{className:"chat-header",children:[(0,t.jsxs)("h5",{className:"mb-0 d-flex align-items-center",children:[(0,t.jsx)("i",{className:"bi bi-robot me-2 d-none d-sm-inline"}),"UKG Chat Assistant"]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:[(0,t.jsx)("i",{className:"bi bi-gear"}),(0,t.jsx)("span",{className:"ms-1 d-none d-md-inline",children:"Settings"})]}),(0,t.jsxs)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:[(0,t.jsx)("i",{className:"bi bi-question-circle"}),(0,t.jsx)("span",{className:"ms-1 d-none d-md-inline",children:"Help"})]})]})]}),(0,t.jsxs)("div",{className:"chat-messages",id:"chat-messages",children:[0===e.length?(0,t.jsxs)("div",{className:"welcome-message",children:[(0,t.jsx)("h2",{children:"Welcome to the UKG Chat System"}),(0,t.jsx)("p",{children:"A comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph."}),(0,t.jsxs)("div",{className:"suggestion-chips",children:[(0,t.jsx)("div",{className:"chip",onClick:()=>o("How does the UKG system work?"),children:"How does the UKG system work?"}),(0,t.jsx)("div",{className:"chip",onClick:()=>o("Tell me about the 13 axes of knowledge"),children:"Tell me about the 13 axes of knowledge"}),(0,t.jsx)("div",{className:"chip",onClick:()=>o("What are knowledge algorithms?"),children:"What are knowledge algorithms?"})]})]}):e.map(e=>(0,t.jsx)("div",{className:"message ".concat(e.type),children:"user"===e.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"message-avatar",children:(0,t.jsx)("i",{className:"bi bi-person-circle"})}),(0,t.jsx)("div",{className:"message-content",children:(0,t.jsx)("div",{className:"message-text",children:e.content})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"message-avatar system-avatar",children:(0,t.jsx)("i",{className:"bi bi-robot"})}),(0,t.jsxs)("div",{className:"message-content",children:[(0,t.jsx)("div",{className:"message-text markdown-content",dangerouslySetInnerHTML:{__html:r.TU.parse(e.content)}}),e.confidence&&(0,t.jsx)("div",{className:"message-metadata",children:(0,t.jsxs)("span",{className:"confidence-badge",children:["Confidence: ",e.confidence]})})]})]})},e.id)),u&&(0,t.jsxs)("div",{className:"message system",children:[(0,t.jsx)("div",{className:"message-avatar system-avatar",children:(0,t.jsx)("i",{className:"bi bi-robot"})}),(0,t.jsx)("div",{className:"message-content",children:(0,t.jsx)("div",{className:"message-text",children:(0,t.jsxs)("div",{className:"typing-indicator",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})})})]}),(0,t.jsx)("div",{ref:N})]}),(0,t.jsxs)("div",{className:"chat-input-container",children:[(0,t.jsxs)("div",{className:"position-relative w-100",children:[(0,t.jsx)("textarea",{id:"chat-input",className:"form-control",placeholder:"Ask a question...",rows:"1",value:i,onChange:e=>{o(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},ref:v}),i&&(0,t.jsx)("button",{className:"btn btn-sm btn-link position-absolute top-50 end-0 translate-middle-y text-secondary me-2",type:"button",onClick:()=>o(""),style:{zIndex:5},children:(0,t.jsx)("i",{className:"bi bi-x-circle"})})]}),(0,t.jsxs)("div",{className:"input-buttons",children:[(0,t.jsx)("button",{className:"btn btn-outline-light d-flex align-items-center justify-content-center",type:"button",title:"Upload file",children:(0,t.jsx)("i",{className:"bi bi-paperclip"})}),(0,t.jsx)("button",{className:"btn btn-primary d-flex align-items-center justify-content-center",type:"button",onClick:y,disabled:!i.trim()||u,style:{minWidth:"48px",minHeight:"38px"},children:u?(0,t.jsxs)("div",{className:"typing-indicator",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]}):(0,t.jsx)("i",{className:"bi bi-send"})})]})]})]}),(0,t.jsx)("div",{className:"modal fade",id:"settings-modal",tabIndex:"-1","aria-hidden":"true",children:(0,t.jsx)("div",{className:"modal-dialog",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h5",{className:"modal-title",children:"Chat Settings"}),(0,t.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("label",{htmlFor:"confidence-threshold",className:"form-label",children:["Target Confidence: ",(0,t.jsx)("span",{id:"confidence-value",children:j.confidenceThreshold})]}),(0,t.jsx)("input",{type:"range",className:"form-range",id:"confidence-threshold",min:"0.6",max:"0.95",step:"0.05",value:j.confidenceThreshold,onChange:e=>f({...j,confidenceThreshold:parseFloat(e.target.value)})})]}),(0,t.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-location-context",checked:j.enableLocationContext,onChange:e=>f({...j,enableLocationContext:e.target.checked})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"enable-location-context",children:"Enable Location Context"})]}),(0,t.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-research-agents",checked:j.enableResearchAgents,onChange:e=>f({...j,enableResearchAgents:e.target.checked})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"enable-research-agents",children:"Enable Research Agents"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Active Personas"}),(0,t.jsxs)("div",{className:"persona-toggles",children:[(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ke",checked:j.personas.ke,onChange:e=>f({...j,personas:{...j.personas,ke:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-ke",children:"Knowledge Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-se",checked:j.personas.se,onChange:e=>f({...j,personas:{...j.personas,se:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-se",children:"Skill Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-re",checked:j.personas.re,onChange:e=>f({...j,personas:{...j.personas,re:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-re",children:"Role Expert"})]}),(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ce",checked:j.personas.ce,onChange:e=>f({...j,personas:{...j.personas,ce:e.target.checked}})}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:"persona-ce",children:"Context Expert"})]})]})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",id:"save-settings",onClick:()=>{let e=document.getElementById("settings-modal");e&&bootstrap.Modal.getInstance(e).hide()},children:"Save changes"})]})]})})})]})]})}}},function(e){e.O(0,[945,198,778,441,888,774,179],function(){return e(e.s=7722)}),_N_E=e.O()}]);