(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{4890:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/regulatory",function(){return a(717)}])},717:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var r=a(5893),t=a(7294),l=a(9008),i=a.n(l),n=a(6153),c=a(8929),d=e=>{var s;let{frameworkUid:a,onNodeClick:l}=e,[i,n]=(0,t.useState)(null),[d,m]=(0,t.useState)(!1),[o,h]=(0,t.useState)(null),[u,x]=(0,t.useState)({});(0,t.useEffect)(()=>{a&&j()},[a]);let j=async()=>{if(a){m(!0),h(null);try{let e=await fetch("/api/regulatory/octopus/".concat(a));if(!e.ok)throw Error("Failed to fetch octopus data: ".concat(e.statusText));let s=await e.json();"success"===s.status?n(s.octopus):h(s.message||"Failed to load regulatory octopus data")}catch(e){h(e.message||"An error occurred while fetching the octopus data"),console.error("Error fetching octopus data:",e)}finally{m(!1)}}},b=(e,s)=>{x(s=>({...s,[e]:!s[e]}))},f=e=>{l&&l(e)};if(d)return(0,r.jsx)("div",{className:"text-center p-4",children:(0,r.jsx)("div",{className:"spinner-border",role:"status"})});if(o)return(0,r.jsx)("div",{className:"alert alert-danger",children:o});if(!i)return(0,r.jsx)("div",{className:"text-center p-4",children:"No data available. Select a regulatory framework."});let g=(e,s)=>e&&0!==Object.keys(e).length?(0,r.jsx)("ul",{className:"list-group mt-2",children:Object.entries(e).map(e=>{let[s,a]=e;return(0,r.jsx)("li",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:()=>f(a.requirement),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-bold",children:a.requirement.label}),(0,r.jsx)("div",{className:"small text-muted",children:a.requirement.description}),a.requirement.criticality&&(0,r.jsx)("span",{className:"badge bg-".concat("high"===a.requirement.criticality?"danger":"medium"===a.requirement.criticality?"warning":"info"," me-1"),children:a.requirement.criticality})]})},s)})}):(0,r.jsx)("div",{className:"text-muted",children:"No requirements defined"}),N=(e,s)=>e&&0!==Object.keys(e).length?(0,r.jsx)("div",{className:"ms-3 mt-2",children:Object.entries(e).map(e=>{let[s,a]=e,t=!0===u[s];return(0,r.jsxs)(c.Zb,{className:"mb-2 border-info",children:[(0,r.jsx)(c.Zb.Header,{className:"bg-light",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",onClick:()=>b(s,"small"),style:{cursor:"pointer"},children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"text-primary",children:[(0,r.jsx)("i",{className:"bi bi-file-text me-2"}),a.framework.label]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"badge bg-info me-1",children:[Object.keys(a.granular_requirements||{}).length," Reqs"]}),(0,r.jsx)("button",{className:"btn btn-sm btn-outline-secondary",children:(0,r.jsx)("i",{className:"bi bi-chevron-".concat(t?"up":"down")})})]})]})}),t&&(0,r.jsxs)(c.Zb.Body,{children:[(0,r.jsx)("small",{className:"text-muted d-block mb-2",children:a.framework.description}),(0,r.jsx)("h6",{className:"mt-3",children:"Granular Requirements"}),g(a.granular_requirements,s)]})]},s)})}):(0,r.jsx)("div",{className:"text-muted",children:"No small frameworks defined"}),p=(e,s)=>e&&0!==Object.keys(e).length?(0,r.jsx)("div",{className:"ms-3 mt-2",children:Object.entries(e).map(e=>{let[s,a]=e,t=!0===u[s];return(0,r.jsxs)(c.Zb,{className:"mb-3 border-primary",children:[(0,r.jsx)(c.Zb.Header,{className:"bg-light",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",onClick:()=>b(s,"medium"),style:{cursor:"pointer"},children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"text-primary",children:[(0,r.jsx)("i",{className:"bi bi-journal-text me-2"}),a.framework.label]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"badge bg-primary me-1",children:[Object.keys(a.small_frameworks||{}).length," Small"]}),(0,r.jsx)("button",{className:"btn btn-sm btn-outline-secondary",children:(0,r.jsx)("i",{className:"bi bi-chevron-".concat(t?"up":"down")})})]})]})}),t&&(0,r.jsxs)(c.Zb.Body,{children:[(0,r.jsx)("small",{className:"text-muted d-block mb-2",children:a.framework.description}),(0,r.jsx)("h6",{className:"mt-3",children:"Small Frameworks"}),N(a.small_frameworks,s)]})]},s)})}):(0,r.jsx)("div",{className:"text-muted",children:"No medium frameworks defined"});return(0,r.jsxs)("div",{className:"regulatory-octopus",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"mb-3",children:[(0,r.jsx)("i",{className:"bi bi-diagram-3 me-2"}),i.mega_framework.label]}),(0,r.jsx)("p",{className:"text-muted",children:i.mega_framework.description}),(0,r.jsxs)("div",{className:"d-flex mb-3",children:[i.mega_framework.framework_type&&(0,r.jsxs)("span",{className:"badge bg-dark me-2",children:["Type: ",i.mega_framework.framework_type]}),i.mega_framework.issuing_authority&&(0,r.jsxs)("span",{className:"badge bg-dark me-2",children:["Authority: ",i.mega_framework.issuing_authority]}),i.mega_framework.effective_date&&(0,r.jsxs)("span",{className:"badge bg-dark",children:["Effective: ",new Date(i.mega_framework.effective_date).toLocaleDateString()]})]})]}),(0,r.jsxs)("h5",{className:"mb-3",children:[(0,r.jsx)("i",{className:"bi bi-diagram-2 me-2"}),"Large Frameworks"]}),(s=i.large_frameworks)&&0!==Object.keys(s).length?(0,r.jsx)("div",{className:"mt-3",children:Object.entries(s).map(e=>{let[s,a]=e,t=!0===u[s];return(0,r.jsxs)(c.Zb,{className:"mb-4 border-secondary",children:[(0,r.jsx)(c.Zb.Header,{className:"bg-light",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",onClick:()=>b(s,"large"),style:{cursor:"pointer"},children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"text-secondary",children:[(0,r.jsx)("i",{className:"bi bi-journal-album me-2"}),a.framework.label]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"badge bg-secondary me-1",children:[Object.keys(a.medium_frameworks||{}).length," Medium"]}),(0,r.jsx)("button",{className:"btn btn-sm btn-outline-secondary",children:(0,r.jsx)("i",{className:"bi bi-chevron-".concat(t?"up":"down")})})]})]})}),t&&(0,r.jsxs)(c.Zb.Body,{children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("small",{className:"text-muted d-block",children:a.framework.description}),a.framework.issuing_authority&&(0,r.jsx)("span",{className:"badge bg-light text-dark me-1",children:a.framework.issuing_authority}),a.framework.effective_date&&(0,r.jsxs)("span",{className:"badge bg-light text-dark",children:["Effective: ",new Date(a.framework.effective_date).toLocaleDateString()]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.zx,{size:"sm",variant:"outline-primary",onClick:()=>f(a.framework),children:"View Details"})})]}),(0,r.jsx)("h6",{className:"mt-3",children:"Medium Frameworks"}),p(a.medium_frameworks,s)]})]},s)})}):(0,r.jsx)("div",{className:"text-muted",children:"No large frameworks defined"})]})};function m(){let[e,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(""),[m,o]=(0,t.useState)(!1),[h,u]=(0,t.useState)(null),[x,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{b()},[]);let b=async()=>{o(!0),u(null);try{let e=await fetch("/api/regulatory/frameworks?node_level=mega");if(!e.ok)throw Error("Failed to fetch frameworks: ".concat(e.statusText));let a=await e.json();"success"===a.status?(s(a.frameworks||[]),a.frameworks&&a.frameworks.length>0&&l(a.frameworks[0].uid)):u(a.message||"Failed to load regulatory frameworks")}catch(e){u(e.message||"An error occurred while fetching the frameworks"),console.error("Error fetching frameworks:",e)}finally{o(!1)}};return(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Regulatory Frameworks - UKG"})}),(0,r.jsxs)("div",{className:"container my-4",children:[(0,r.jsx)("h1",{className:"mb-4",children:"Regulatory Frameworks"}),(0,r.jsx)("p",{className:"lead mb-4",children:"The Regulatory Framework axis (Axis 6) manages regulatory frameworks, compliance requirements, and legal structures with an octopus-style branch mapping."}),(0,r.jsxs)("div",{className:"row mb-4",children:[(0,r.jsxs)("div",{className:"col-md-4",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Zb.Header,{children:(0,r.jsx)(c.Zb.Title,{children:"Select Framework"})}),(0,r.jsxs)(c.Zb.Body,{children:[m&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{className:"spinner-border",role:"status"})}),h&&(0,r.jsx)("div",{className:"alert alert-danger",children:h}),!m&&!h&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Mega Framework"}),(0,r.jsxs)("select",{className:"form-select",value:a,onChange:e=>{l(e.target.value),j(null)},children:[0===e.length&&(0,r.jsx)("option",{value:"",children:"No frameworks available"}),e.map(e=>(0,r.jsx)("option",{value:e.uid,children:e.label},e.uid))]})]}),(0,r.jsx)("div",{className:"d-grid gap-2",children:(0,r.jsx)(c.zx,{variant:"primary",onClick:b,children:"Refresh Frameworks"})})]})]}),x&&(0,r.jsxs)(c.Zb,{className:"mt-3",children:[(0,r.jsx)(c.Zb.Header,{className:"bg-info text-white",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,r.jsx)(c.Zb.Title,{className:"mb-0",children:"Node Details"}),(0,r.jsx)(c.zx,{variant:"close",onClick:()=>{j(null)}})]})}),(0,r.jsxs)(c.Zb.Body,{children:[(0,r.jsx)("h5",{children:x.label}),(0,r.jsx)("p",{className:"text-muted",children:x.description}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h6",{children:"Properties:"}),(0,r.jsxs)("ul",{className:"list-group",children:[x.node_level&&(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Level:"}),(0,r.jsx)("span",{className:"badge bg-primary",children:x.node_level})]}),x.framework_type&&(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Type:"}),(0,r.jsx)("span",{children:x.framework_type})]}),x.issuing_authority&&(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Authority:"}),(0,r.jsx)("span",{children:x.issuing_authority})]}),x.effective_date&&(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Effective Date:"}),(0,r.jsx)("span",{children:new Date(x.effective_date).toLocaleDateString()})]}),x.criticality&&(0,r.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Criticality:"}),(0,r.jsx)("span",{className:"badge bg-".concat("high"===x.criticality?"danger":"medium"===x.criticality?"warning":"info"),children:x.criticality})]})]})]})]})]})]}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Zb.Header,{children:(0,r.jsx)(c.Zb.Title,{children:"Octopus Structure"})}),(0,r.jsx)(c.Zb.Body,{children:a?(0,r.jsx)(d,{frameworkUid:a,onNodeClick:e=>{j(e)}}):(0,r.jsx)("div",{className:"text-center p-4",children:"Please select a regulatory framework"})})]})})]})]})]})}},9008:function(e,s,a){e.exports=a(3867)}},function(e){e.O(0,[945,198,14,864,751,888,774,179],function(){return e(e.s=4890)}),_N_E=e.O()}]);