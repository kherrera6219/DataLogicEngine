(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{7722:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return a(1689)}])},6153:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var n=a(5893),t=a(1664),i=a.n(t),l=a(7294);function c(e){let{children:s}=e,[a,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{window.scrollY>50?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,n.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,n.jsx)("header",{children:(0,n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark ".concat(a?"shadow-sm":""),style:{transition:"all 0.3s ease"},children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)(i(),{href:"/",className:"navbar-brand d-flex align-items-center",children:[(0,n.jsx)("i",{className:"bi bi-diagram-3 me-2"}),(0,n.jsx)("span",{className:"d-none d-sm-inline",children:"Universal Knowledge Graph"}),(0,n.jsx)("span",{className:"d-inline d-sm-none",children:"UKG"})]}),(0,n.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,n.jsx)("span",{className:"navbar-toggler-icon"})}),(0,n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:(0,n.jsxs)("ul",{className:"navbar-nav ms-auto",children:[(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)(i(),{href:"/",className:"nav-link px-3",children:[(0,n.jsx)("i",{className:"bi bi-house-door me-1 d-inline d-lg-none"})," Home"]})}),(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)(i(),{href:"/chat",className:"nav-link px-3",children:[(0,n.jsx)("i",{className:"bi bi-chat-dots me-1 d-inline d-lg-none"})," Chat"]})}),(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)("a",{className:"nav-link px-3",href:"#about",children:[(0,n.jsx)("i",{className:"bi bi-info-circle me-1 d-inline d-lg-none"})," About"]})})]})})]})})}),(0,n.jsx)("main",{className:"flex-grow-1",children:(0,n.jsx)("div",{className:"container py-4",children:s})}),(0,n.jsx)("footer",{className:"bg-dark text-light py-3 mt-4",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row align-items-center",children:[(0,n.jsx)("div",{className:"col-md-6 text-center text-md-start mb-2 mb-md-0",children:(0,n.jsxs)("p",{className:"mb-0",children:["Universal Knowledge Graph System \xa9 ",new Date().getFullYear()]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("ul",{className:"list-inline mb-0 text-center text-md-end",children:[(0,n.jsx)("li",{className:"list-inline-item",children:(0,n.jsx)("a",{href:"#",className:"text-light",children:(0,n.jsx)("i",{className:"bi bi-github"})})}),(0,n.jsx)("li",{className:"list-inline-item ms-3",children:(0,n.jsx)("a",{href:"#",className:"text-light",children:(0,n.jsx)("i",{className:"bi bi-twitter"})})}),(0,n.jsx)("li",{className:"list-inline-item ms-3",children:(0,n.jsx)("a",{href:"#",className:"text-light",children:(0,n.jsx)("i",{className:"bi bi-linkedin"})})})]})})]})})})]})}},1689:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var n=a(5893),t=a(7294),i=a(9008),l=a.n(i),c=a(6153),r=a(7441);function o(){let[e,s]=(0,t.useState)([]),[i,o]=(0,t.useState)(""),[d,m]=(0,t.useState)([]),[h,x]=(0,t.useState)(null),[b,j]=(0,t.useState)("New Conversation"),[p,N]=(0,t.useState)(!1),[g,u]=(0,t.useState)({confidenceThreshold:.85,enableLocationContext:!0,enableResearchAgents:!0,personas:{ke:!0,se:!0,re:!0,ce:!0}}),v=(0,t.useRef)(null),f=(0,t.useRef)(null);(0,t.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("ukg_chat_history");e&&m(JSON.parse(e))}catch(e){console.error("Failed to load chat history:",e)}})(),s([{id:"welcome",type:"system",content:"# Welcome to the UKG Chat System\n\nA comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph. How can I help you today?"}])},[]),(0,t.useEffect)(()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,t.useEffect)(()=>{f.current&&(f.current.style.height="auto",f.current.style.height=f.current.scrollHeight+"px")},[i]);let y=async()=>{if(!i.trim())return;let e={id:Date.now().toString(),type:"user",content:i,timestamp:new Date().toISOString()};s(s=>[...s,e]),o(""),N(!0);try{let e=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i,target_confidence:g.confidenceThreshold,chat_id:h,use_location_context:g.enableLocationContext,use_research_agents:g.enableResearchAgents,active_personas:Object.entries(g.personas).filter(e=>{let[s,a]=e;return a}).map(e=>{let[s]=e;return s.toUpperCase()})})}),a=await e.json();if(!h&&a.chat_id){x(a.chat_id);let e={id:a.chat_id,title:w(i),created:new Date().toISOString(),lastUpdated:new Date().toISOString()};m(s=>[e,...s]),j(e.title),localStorage.setItem("ukg_chat_history",JSON.stringify([e,...d]))}let n={id:"response-".concat(Date.now()),type:"system",content:a.error?"Error: ".concat(a.error):a.response,confidence:a.confidence,timestamp:new Date().toISOString()};s(e=>[...e,n])}catch(a){console.error("Error sending message:",a);let e={id:"error-".concat(Date.now()),type:"error",content:"Sorry, there was an error processing your request. Please try again.",timestamp:new Date().toISOString()};s(s=>[...s,e])}finally{N(!1)}},k=e=>{let a=d.find(s=>s.id===e);a&&(x(e),j(a.title),s([{id:"welcome",type:"system",content:"# ".concat(a.title,"\n\nContinuing your previous conversation.")}]))},w=e=>e?e.length>30?e.substring(0,30)+"...":e:"New Conversation";return(0,t.useEffect)(()=>{a.e(455).then(a.bind(a,1455)).then(e=>{let s=e.initResponsiveHandlers();return()=>s()})},[]),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"UKG Chat Interface"})}),(0,n.jsxs)("div",{className:"chat-container",children:[(0,n.jsxs)("div",{className:"chat-sidebar",children:[(0,n.jsxs)("div",{className:"sidebar-header",children:[(0,n.jsx)("h5",{className:"mb-0",children:"Chat History"}),(0,n.jsx)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]}),(0,n.jsxs)("div",{className:"chat-history",children:[d.map((e,s)=>(0,n.jsxs)("div",{className:"chat-history-item ".concat(h===e.id?"active":""),onClick:()=>k(e.id),children:[(0,n.jsx)("i",{className:"bi bi-chat-left-text"}),e.title]},s)),0===d.length&&(0,n.jsxs)("div",{className:"text-center text-muted p-3",children:[(0,n.jsx)("i",{className:"bi bi-chat-square-text fs-3 mb-2"}),(0,n.jsx)("p",{children:"No chat history yet"})]})]}),(0,n.jsx)("div",{className:"sidebar-footer",children:(0,n.jsxs)("button",{className:"btn btn-outline-light btn-sm w-100 d-flex align-items-center justify-content-center",children:[(0,n.jsx)("i",{className:"bi bi-trash me-2"}),"Clear History"]})})]}),(0,n.jsx)("button",{className:"sidebar-toggle",children:(0,n.jsx)("i",{className:"bi bi-list"})}),(0,n.jsxs)("div",{className:"chat-main",children:[(0,n.jsxs)("div",{className:"chat-header",children:[(0,n.jsxs)("h5",{className:"mb-0 d-flex align-items-center",children:[(0,n.jsx)("i",{className:"bi bi-robot me-2 d-none d-sm-inline"}),"UKG Chat Assistant"]}),(0,n.jsxs)("div",{className:"d-flex gap-2",children:[(0,n.jsxs)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:[(0,n.jsx)("i",{className:"bi bi-gear"}),(0,n.jsx)("span",{className:"ms-1 d-none d-md-inline",children:"Settings"})]}),(0,n.jsxs)("button",{className:"btn btn-sm btn-outline-light d-flex align-items-center",children:[(0,n.jsx)("i",{className:"bi bi-question-circle"}),(0,n.jsx)("span",{className:"ms-1 d-none d-md-inline",children:"Help"})]})]})]}),(0,n.jsxs)("div",{className:"chat-messages",id:"chat-messages",children:[0===e.length?(0,n.jsxs)("div",{className:"welcome-message",children:[(0,n.jsx)("h2",{children:"Welcome to the UKG Chat System"}),(0,n.jsx)("p",{children:"A comprehensive AI knowledge system with a 13-axis Universal Knowledge Graph."}),(0,n.jsxs)("div",{className:"suggestion-chips",children:[(0,n.jsx)("div",{className:"chip",onClick:()=>o("How does the UKG system work?"),children:"How does the UKG system work?"}),(0,n.jsx)("div",{className:"chip",onClick:()=>o("Tell me about the 13 axes of knowledge"),children:"Tell me about the 13 axes of knowledge"}),(0,n.jsx)("div",{className:"chip",onClick:()=>o("What are knowledge algorithms?"),children:"What are knowledge algorithms?"})]})]}):e.map(e=>(0,n.jsx)("div",{className:"message ".concat(e.type),children:"user"===e.type?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"message-avatar",children:(0,n.jsx)("i",{className:"bi bi-person-circle"})}),(0,n.jsx)("div",{className:"message-content",children:(0,n.jsx)("div",{className:"message-text",children:e.content})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"message-avatar system-avatar",children:(0,n.jsx)("i",{className:"bi bi-robot"})}),(0,n.jsxs)("div",{className:"message-content",children:[(0,n.jsx)("div",{className:"message-text markdown-content",dangerouslySetInnerHTML:{__html:r.TU.parse(e.content)}}),e.confidence&&(0,n.jsx)("div",{className:"message-metadata",children:(0,n.jsxs)("span",{className:"confidence-badge",children:["Confidence: ",e.confidence]})})]})]})},e.id)),p&&(0,n.jsxs)("div",{className:"message system",children:[(0,n.jsx)("div",{className:"message-avatar system-avatar",children:(0,n.jsx)("i",{className:"bi bi-robot"})}),(0,n.jsx)("div",{className:"message-content",children:(0,n.jsx)("div",{className:"message-text",children:(0,n.jsxs)("div",{className:"typing-indicator",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})})})]}),(0,n.jsx)("div",{ref:v})]}),(0,n.jsxs)("div",{className:"chat-input-container",children:[(0,n.jsxs)("div",{className:"position-relative w-100",children:[(0,n.jsx)("textarea",{id:"chat-input",className:"form-control",placeholder:"Ask a question...",rows:"1",value:i,onChange:e=>{o(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},ref:f}),i&&(0,n.jsx)("button",{className:"btn btn-sm btn-link position-absolute top-50 end-0 translate-middle-y text-secondary me-2",type:"button",onClick:()=>o(""),style:{zIndex:5},children:(0,n.jsx)("i",{className:"bi bi-x-circle"})})]}),(0,n.jsxs)("div",{className:"input-buttons",children:[(0,n.jsx)("button",{className:"btn btn-outline-light d-flex align-items-center justify-content-center",type:"button",title:"Upload file",children:(0,n.jsx)("i",{className:"bi bi-paperclip"})}),(0,n.jsx)("button",{className:"btn btn-primary d-flex align-items-center justify-content-center",type:"button",onClick:y,disabled:!i.trim()||p,style:{minWidth:"48px",minHeight:"38px"},children:p?(0,n.jsxs)("div",{className:"typing-indicator",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]}):(0,n.jsx)("i",{className:"bi bi-send"})})]})]})]}),(0,n.jsx)("div",{className:"modal fade",id:"settings-modal",tabIndex:"-1","aria-hidden":"true",children:(0,n.jsx)("div",{className:"modal-dialog",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Chat Settings"}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,n.jsxs)("div",{className:"modal-body",children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsxs)("label",{htmlFor:"confidence-threshold",className:"form-label",children:["Target Confidence: ",(0,n.jsx)("span",{id:"confidence-value",children:g.confidenceThreshold})]}),(0,n.jsx)("input",{type:"range",className:"form-range",id:"confidence-threshold",min:"0.6",max:"0.95",step:"0.05",value:g.confidenceThreshold,onChange:e=>u({...g,confidenceThreshold:parseFloat(e.target.value)})})]}),(0,n.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-location-context",checked:g.enableLocationContext,onChange:e=>u({...g,enableLocationContext:e.target.checked})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"enable-location-context",children:"Enable Location Context"})]}),(0,n.jsxs)("div",{className:"mb-3 form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"enable-research-agents",checked:g.enableResearchAgents,onChange:e=>u({...g,enableResearchAgents:e.target.checked})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"enable-research-agents",children:"Enable Research Agents"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Active Personas"}),(0,n.jsxs)("div",{className:"persona-toggles",children:[(0,n.jsxs)("div",{className:"form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ke",checked:g.personas.ke,onChange:e=>u({...g,personas:{...g.personas,ke:e.target.checked}})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"persona-ke",children:"Knowledge Expert"})]}),(0,n.jsxs)("div",{className:"form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-se",checked:g.personas.se,onChange:e=>u({...g,personas:{...g.personas,se:e.target.checked}})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"persona-se",children:"Skill Expert"})]}),(0,n.jsxs)("div",{className:"form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-re",checked:g.personas.re,onChange:e=>u({...g,personas:{...g.personas,re:e.target.checked}})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"persona-re",children:"Role Expert"})]}),(0,n.jsxs)("div",{className:"form-check form-switch",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"persona-ce",checked:g.personas.ce,onChange:e=>u({...g,personas:{...g.personas,ce:e.target.checked}})}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"persona-ce",children:"Context Expert"})]})]})]})]}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary",id:"save-settings",onClick:()=>{let e=document.getElementById("settings-modal");e&&bootstrap.Modal.getInstance(e).hide()},children:"Save changes"})]})]})})})]})]})}}},function(e){e.O(0,[996,441,888,774,179],function(){return e(e.s=7722)}),_N_E=e.O()}]);