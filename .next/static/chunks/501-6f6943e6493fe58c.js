"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{7454:function(e,a,i){var s=i(5893),l=i(7294),n=i(6720),t=i(2121),c=i(1351),r=i(6346);a.Z=e=>{let{initialLocations:a}=e,[i,o]=(0,l.useState)(a||[]),[d,h]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[p,u]=(0,l.useState)(null),[j,g]=(0,l.useState)({name:"",type:"",lat:"",lng:"",radius:"50"}),[b,y]=(0,l.useState)("list"),[N,v]=(0,l.useState)([]),f=(0,l.useRef)(null),w=(0,l.useRef)(null),C=(0,l.useRef)([]);(0,l.useEffect)(()=>{Z()},[]),(0,l.useEffect)(()=>{i.length>0&&"map"===b&&window.google&&window.google.maps&&L()},[i,b]),(0,l.useEffect)(()=>{if("map"===b&&!window.google){let e=document.createElement("script");return e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places",e.async=!0,e.defer=!0,e.onload=()=>{i.length>0&&L()},document.head.appendChild(e),()=>{document.head.removeChild(e)}}},[b]);let Z=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(!0),x(null);try{let a=new URLSearchParams;Object.entries(e).forEach(e=>{let[i,s]=e;s&&a.append(i,s)});let i=await fetch("/api/locations?".concat(a.toString())),s=await i.json();s.success?o(s.locations||[]):x(s.error||"Failed to fetch locations")}catch(e){x("Error fetching locations: "+e.message)}finally{h(!1)}},k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;h(!0),x(null);try{let a=new URLSearchParams;e&&a.append("root_uid",e);let i=await fetch("/api/locations/hierarchy?".concat(a.toString())),s=await i.json();s.success?(v(s.hierarchies||[s.hierarchy]),y("hierarchy")):x(s.error||"Failed to fetch location hierarchy")}catch(e){x("Error fetching hierarchy: "+e.message)}finally{h(!1)}},S=e=>{let{name:a,value:i}=e.target;g(e=>({...e,[a]:i}))},L=()=>{if(!f.current)return;let e={lat:0,lng:0},a=new window.google.maps.LatLngBounds,s=!1;i.forEach(e=>{e.latitude&&e.longitude&&(a.extend({lat:e.latitude,lng:e.longitude}),s=!0)}),s||(e={lat:39.8283,lng:-98.5795}),w.current=new window.google.maps.Map(f.current,{center:e,zoom:4,mapTypeId:"roadmap"}),C.current=i.filter(e=>e.latitude&&e.longitude).map(e=>{let a=new window.google.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:w.current,title:e.name,animation:window.google.maps.Animation.DROP});return a.addListener("click",()=>{u(e)}),a}),s&&w.current.fitBounds(a)},R=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,s.jsxs)("div",{className:"location-hierarchy-node mb-2",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",style:{paddingLeft:"".concat(20*a,"px")},children:[(0,s.jsx)("i",{className:"bi bi-geo-alt me-2 ".concat(0===a?"text-primary":"")}),(0,s.jsxs)("span",{className:"location-name ".concat(0===a?"fw-bold":""),onClick:()=>u(e),style:{cursor:"pointer"},children:[e.name,(0,s.jsxs)("span",{className:"text-muted ms-2 small",children:["(",e.location_type,")"]})]})]}),e.children&&e.children.length>0&&(0,s.jsx)("div",{className:"children-container",children:e.children.map(e=>R(e,a+1))})]},e.uid)};return(0,s.jsxs)("div",{className:"location-manager",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,s.jsx)("h2",{children:"Location Management (Axis 12)"}),(0,s.jsxs)("div",{className:"btn-group",children:[(0,s.jsxs)(n.Z,{variant:"list"===b?"primary":"outline-primary",onClick:()=>y("list"),children:[(0,s.jsx)("i",{className:"bi bi-list me-1"})," List View"]}),(0,s.jsxs)(n.Z,{variant:"map"===b?"primary":"outline-primary",onClick:()=>y("map"),children:[(0,s.jsx)("i",{className:"bi bi-map me-1"})," Map View"]}),(0,s.jsxs)(n.Z,{variant:"hierarchy"===b?"primary":"outline-primary",onClick:()=>k(),children:[(0,s.jsx)("i",{className:"bi bi-diagram-3 me-1"})," Hierarchy"]})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsxs)(t.Z,{className:"mb-4",children:[(0,s.jsx)(t.Z.Header,{children:"Location Search"}),(0,s.jsx)(t.Z.Body,{children:(0,s.jsxs)(c.Z,{onSubmit:e=>{e.preventDefault(),Z(j)},children:[(0,s.jsxs)(c.Z.Group,{className:"mb-3",children:[(0,s.jsx)(c.Z.Label,{children:"Name"}),(0,s.jsx)(c.Z.Control,{type:"text",name:"name",placeholder:"Search by name",value:j.name,onChange:S})]}),(0,s.jsxs)(c.Z.Group,{className:"mb-3",children:[(0,s.jsx)(c.Z.Label,{children:"Type"}),(0,s.jsxs)(c.Z.Select,{name:"type",value:j.type,onChange:S,children:[(0,s.jsx)("option",{value:"",children:"All Types"}),(0,s.jsx)("option",{value:"Country",children:"Country"}),(0,s.jsx)("option",{value:"State",children:"State/Province"}),(0,s.jsx)("option",{value:"City",children:"City"}),(0,s.jsx)("option",{value:"County",children:"County"}),(0,s.jsx)("option",{value:"Region",children:"Region"}),(0,s.jsx)("option",{value:"SupranationalRegion",children:"Supranational Region"})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsxs)(c.Z.Group,{className:"mb-3",children:[(0,s.jsx)(c.Z.Label,{children:"Latitude"}),(0,s.jsx)(c.Z.Control,{type:"number",name:"lat",placeholder:"e.g. 40.7128",value:j.lat,onChange:S,step:"any"})]})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsxs)(c.Z.Group,{className:"mb-3",children:[(0,s.jsx)(c.Z.Label,{children:"Longitude"}),(0,s.jsx)(c.Z.Control,{type:"number",name:"lng",placeholder:"e.g. -74.0060",value:j.lng,onChange:S,step:"any"})]})})]}),(0,s.jsxs)(c.Z.Group,{className:"mb-3",children:[(0,s.jsx)(c.Z.Label,{children:"Radius (km)"}),(0,s.jsx)(c.Z.Control,{type:"number",name:"radius",placeholder:"Search radius in km",value:j.radius,onChange:S,min:"1",max:"5000"})]}),(0,s.jsx)("div",{className:"d-grid",children:(0,s.jsxs)(n.Z,{variant:"primary",type:"submit",disabled:d,children:[d?(0,s.jsx)(r.Z,{size:"sm",animation:"border"}):(0,s.jsx)("i",{className:"bi bi-search me-1"}),"Search Locations"]})})]})})]}),p&&(0,s.jsxs)(t.Z,{className:"location-details",children:[(0,s.jsxs)(t.Z.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsx)("span",{children:"Location Details"}),(0,s.jsx)(n.Z,{variant:"link",className:"p-0 text-muted",onClick:()=>u(null),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,s.jsxs)(t.Z.Body,{children:[(0,s.jsx)("h4",{children:p.name}),(0,s.jsx)("p",{className:"text-muted",children:p.location_type}),p.latitude&&p.longitude&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Coordinates:"})," ",p.latitude,", ",p.longitude]}),p.attributes&&Object.keys(p.attributes).length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h5",{children:"Attributes"}),(0,s.jsx)("ul",{className:"list-unstyled",children:Object.entries(p.attributes).map(e=>{let[a,i]=e;return(0,s.jsxs)("li",{className:"mb-1",children:[(0,s.jsxs)("strong",{children:[a,":"]})," ","object"==typeof i?JSON.stringify(i):i]},a)})})]}),p.parent&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h5",{children:"Parent Location"}),(0,s.jsxs)("p",{className:"mb-0 cursor-pointer",onClick:()=>u(p.parent),style:{cursor:"pointer"},children:[(0,s.jsx)("i",{className:"bi bi-arrow-up-right me-1"}),p.parent.name," (",p.parent.location_type,")"]})]}),p.children&&p.children.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("h5",{children:["Sub-Locations (",p.children.length,")"]}),(0,s.jsxs)("ul",{className:"list-unstyled",children:[p.children.slice(0,5).map(e=>(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("span",{className:"cursor-pointer",onClick:()=>u(e),style:{cursor:"pointer"},children:[(0,s.jsx)("i",{className:"bi bi-geo-alt-fill me-1 small"}),e.name," (",e.location_type,")"]})},e.uid)),p.children.length>5&&(0,s.jsxs)("li",{className:"text-muted small",children:["+ ",p.children.length-5," more locations"]})]})]}),(0,s.jsx)("div",{className:"mt-3 d-grid gap-2",children:(0,s.jsxs)(n.Z,{variant:"outline-primary",size:"sm",onClick:()=>k(p.uid),children:[(0,s.jsx)("i",{className:"bi bi-diagram-3 me-1"}),"View in Hierarchy"]})})]})]})]}),(0,s.jsxs)("div",{className:"col-md-8",children:[m&&(0,s.jsxs)("div",{className:"alert alert-danger",children:[(0,s.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),m]}),d?(0,s.jsxs)("div",{className:"text-center my-5",children:[(0,s.jsx)(r.Z,{animation:"border"}),(0,s.jsx)("p",{className:"mt-2",children:"Loading location data..."})]}):(0,s.jsxs)(s.Fragment,{children:["list"===b&&(0,s.jsx)("div",{className:"location-list",children:(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(t.Z.Header,{children:(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("span",{children:["Locations (",i.length,")"]}),(0,s.jsx)("div",{children:(0,s.jsxs)(c.Z.Select,{size:"sm",className:"d-inline-block",style:{width:"auto"},onChange:e=>{g(a=>({...a,type:e.target.value})),Z({...j,type:e.target.value})},value:j.type,children:[(0,s.jsx)("option",{value:"",children:"All Types"}),(0,s.jsx)("option",{value:"Country",children:"Countries"}),(0,s.jsx)("option",{value:"State",children:"States/Provinces"}),(0,s.jsx)("option",{value:"City",children:"Cities"}),(0,s.jsx)("option",{value:"County",children:"Counties"}),(0,s.jsx)("option",{value:"Region",children:"Regions"})]})})]})}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover mb-0",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Coordinates"}),j.lat&&j.lng&&(0,s.jsx)("th",{children:"Distance"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===i.length?(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:"5",className:"text-center py-3",children:[(0,s.jsx)("i",{className:"bi bi-inbox me-2"}),"No locations found"]})}):i.map(e=>(0,s.jsxs)("tr",{onClick:()=>u(e),style:{cursor:"pointer"},className:(null==p?void 0:p.uid)===e.uid?"table-primary":"",children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"badge bg-secondary",children:e.location_type})}),(0,s.jsx)("td",{children:e.latitude&&e.longitude?(0,s.jsxs)("small",{children:[e.latitude.toFixed(4),", ",e.longitude.toFixed(4)]}):(0,s.jsx)("span",{className:"text-muted",children:"N/A"})}),j.lat&&j.lng&&(0,s.jsx)("td",{children:void 0!==e.distance?(0,s.jsxs)("span",{children:[e.distance.toFixed(1)," km"]}):(0,s.jsx)("span",{className:"text-muted",children:"N/A"})}),(0,s.jsx)("td",{children:(0,s.jsx)(n.Z,{size:"sm",variant:"link",onClick:a=>{a.stopPropagation(),u(e)},children:(0,s.jsx)("i",{className:"bi bi-info-circle"})})})]},e.uid))})]})})]})}),"map"===b&&(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(t.Z.Header,{children:"Location Map"}),(0,s.jsx)(t.Z.Body,{className:"p-0",children:(0,s.jsx)("div",{ref:f,style:{height:"600px",width:"100%"},className:"location-map",children:!window.google&&(0,s.jsxs)("div",{className:"text-center p-5",children:[(0,s.jsx)("p",{children:"Loading map..."}),(0,s.jsx)(r.Z,{animation:"border"})]})})})]}),"hierarchy"===b&&(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(t.Z.Header,{children:"Location Hierarchy"}),(0,s.jsx)(t.Z.Body,{children:0===N.length?(0,s.jsx)("div",{className:"text-center py-3",children:(0,s.jsx)("p",{children:"No hierarchy data available"})}):(0,s.jsx)("div",{className:"location-hierarchy",children:N.map(e=>R(e))})})]})]})]})]})]})}},1317:function(e,a,i){var s=i(5893),l=i(7294),n=i(2874),t=i(4695),c=i(8772),r=i(2085),o=i(3371),d=i(7730),h=i(3096),m=i(8577),x=i(1389),p=i(1664),u=i.n(p),j=i(1163);let g=(0,n.Z)({navbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"var(--colorNeutralBackground1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",...t.q5.padding("8px","16px"),height:"60px",width:"100%",position:"sticky",top:0,zIndex:100},brand:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none",color:"var(--colorBrandForeground1)",fontWeight:600},logo:{display:"flex",fontSize:"24px"},title:{fontSize:"18px","@media(max-width: 576px)":{display:"none"}},titleShort:{display:"none",fontSize:"18px","@media(max-width: 576px)":{display:"block"}},navItems:{display:"flex",alignItems:"center",gap:"8px","@media(max-width: 768px)":{display:"none"}},mobileMenu:{display:"none","@media(max-width: 768px)":{display:"block"}},navLink:{color:"var(--colorNeutralForeground1)",textDecoration:"none",...t.q5.padding("8px","12px"),borderRadius:"4px",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--colorNeutralBackground2)"}},activeNavLink:{backgroundColor:"var(--colorNeutralBackground2)",fontWeight:600}}),b=e=>{let{navItems:a=[]}=e,i=g(),n=(0,j.useRouter)(),[t,p]=(0,l.useState)(!1),b=e=>n.pathname===e;return(0,s.jsxs)("nav",{className:i.navbar,children:[(0,s.jsxs)(u(),{href:"/",className:i.brand,children:[(0,s.jsx)("span",{className:i.logo,children:(0,s.jsx)("i",{className:"bi bi-diagram-3"})}),(0,s.jsx)("span",{className:i.title,children:"Universal Knowledge Graph"}),(0,s.jsx)("span",{className:i.titleShort,children:"UKG"})]}),(0,s.jsx)("div",{className:i.navItems,children:a.map((e,a)=>(0,s.jsx)(c.u,{content:e.label,children:(0,s.jsxs)(u(),{href:e.href,className:"".concat(i.navLink," ").concat(b(e.href)?i.activeNavLink:""),children:[e.icon&&(0,s.jsx)("i",{className:"bi bi-".concat(e.icon," me-2")}),e.label]})},a))}),(0,s.jsx)("div",{className:i.mobileMenu,children:(0,s.jsxs)(r.v,{children:[(0,s.jsx)(o.b,{disableButtonEnhancement:!0,children:(0,s.jsx)(d.z,{icon:(0,s.jsx)("i",{className:"bi bi-list"}),iconOnly:!0,appearance:"subtle","aria-label":"Menu"})}),(0,s.jsx)(h.Y,{children:(0,s.jsx)(m.q,{children:a.map((e,a)=>(0,s.jsx)(x.s,{onClick:()=>n.push(e.href),icon:(0,s.jsx)("i",{className:"bi bi-".concat(e.icon)}),children:e.label},a))})})]})})]})};b.defaultProps={navItems:[{href:"/",label:"Home",icon:"house"},{href:"/axis1",label:"Axis 1",icon:"1-circle"},{href:"/axis2",label:"Axis 2",icon:"2-circle"},{href:"/axis3",label:"Axis 3",icon:"3-circle"},{href:"/axis4",label:"Axis 4",icon:"4-circle"},{href:"/axis5",label:"Axis 5",icon:"5-circle"},{href:"/axis6",label:"Axis 6",icon:"gear"},{href:"/compliance",label:"Compliance",icon:"check-circle"},{href:"/locations",label:"Locations",icon:"geo-alt"},{href:"/contextual",label:"Context Experts",icon:"person"},{href:"/timeline",label:"Timeline",icon:"clock-history"},{href:"/unified-mapping",label:"Unified Mapping",icon:"geo"},{href:"/compliance-dashboard",label:"SOC 2 Compliance",icon:"shield-check"}]},a.Z=b}}]);